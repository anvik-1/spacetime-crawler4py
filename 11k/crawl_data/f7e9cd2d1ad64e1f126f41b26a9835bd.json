{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project4?version=14", "word_count": 1440, "words": ["cs221-2019-spring-project4", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "wiki:", "cs221-2019-spring-project4", "Context", "Navigation", "\u2190", "Previous", "Version", "View", "Latest", "Version", "Next", "Version", "\u2192", "Version", "14", "(modified", "by", "Zuozhi", "Wang", ",", "6", "years", "ago", ")", "(", "diff", ")", "--", "CS221:", "Project", "4", "-", "RA:", "Ranking", "Test", "Cases", "Due:", "Week", "9", "Tue.", "(May", "28)", "Week", "9", "Th.", "(May", "30),", "Due", "on", "Github", "as", "Pull", "Requests", "Review", "Due:", "Week", "9", "Fri.", "(May", "31)", "Week", "9", "Sun", "(June", "2),", "Due", "on", "Github", "as", "Pull", "Requests", "Comments", "Final", "Code", "Due:", "Week", "10,", "Sun.", "(June", "9),", "Due", "on", "Github.", "Coding", "Tasks", "Implement", "TF-IDF", "ranking", "(Cosine)", "(10", "points)", "Implement", "PageRank", "and", "run", "with", "ICS", "websites", "(5", "points)", "Testing", "Tasks", "Write", "at", "least", "1", "test", "case", "for", "a", "task", "(2", "points)", "Review", "the", "test", "cases", "of", "two", "teams", "(2", "points)", "Total:", "19", "points", "Overview", "In", "this", "project,", "you'll", "implement", "two", "ranking", "methods:", "TF-IDF", "(Cosine)", "and", "PageRank.", "Task", "1:", "Implement", "TF-IDF", "ranking.", "Modify", "both", "your", "InvertedIndex", "from", "Project", "2", "and", "PositionalIndex", "from", "Project", "3", "to", "include", "all", "necessary", "information", "to", "calculate", "TF-IDF", "scores.", "Implement", "the", "following", "searchTfIdf", "function", "that", "returns", "the", "top-K", "documents", "ranked", "by", "TF-IDF", "scores.", "First,", "we'll", "go", "over", "an", "example", "to", "calculate", "TF-IDF", "Cosine", "scores", "using", "the", "vector", "space", "model.", "Segment", "1", "d1:", "\u201cnew", "york", "city\u201d", "d2:", "\u201clos", "angeles", "city\u201d", "Segment", "2", "d1:", "\u201cnew", "york", "post\u201d", "Query", "q:", "\"new", "new", "city\".", "(We", "use", "two", "copies", "of", "\"new\"", "on", "purpose.)", "Number", "of", "documents", "in", "the", "system:", "3.", "Document", "frequency", "for", "query", "keywords:", "new", "=", "2", "{s1d1,", "s2d1}", "city", "=", "2", "{s1d1,", "s1d2}", "IDF:", "new", "=", "log(3/2)", "\u2248", "0.18", "city", "=", "log(3/2)", "\u2248", "0.18", "TF", "(Term", "frequency):", "new", "=", "{s1d1:", "1,", "s2d1:", "1,", "query:", "2}", "city", "=", "{s1d1:", "1,", "s1d2:", "1,", "query:", "1}", "TF-IDF", "vectors", "of", "documents", "and", "query:", "s1d1", "=", "[new:", "1", "*", "IDF(new),", "city:", "1", "*", "IDF(city)]", "=", "[0.18,", "0.18]", "s1d2", "=", "[new:", "0,", "city:", "1", "*", "IDF(city)]", "=", "[0", ",", "0.18]", "s2d1", "=", "[new:", "1", "*", "IDF(new),", "city:", "0]", "=", "[0.18,", "0", "]", "query", "=", "[new:", "2", "*", "IDF(new),", "city:", "1", "*", "IDF(city)]", "=", "[0.36,", "0.18]", "Cosine", "similarity", "between", "the", "query", "and", "each", "document:", "sim(s1d1,", "q)", "=", "s1d1", "\u00b7", "query", "/", "\u2016s1d1\u2016", "=", "(0.18", "*", "0.36", "+", "0.18", "*", "0.18)", "/", "sqrt(0.18^2", "+", "0.18^2)", "\u2248", "0.38", "sim(s1d2,", "q)", "=", "(0", "*", "0.36", "+", "0.18", "*", "0.18)", "/", "sqrt(0", "+", "0.18^2)", "=", "0.18", "sim(s2d1,", "q)", "=", "(0.18", "*", "0.36", "+", "0", "*", "0.18)", "/", "sqrt(0.18^2", "+", "0)", "=", "0.36", "So", "the", "ranked", "order", "of", "the", "documents", "is:", "[s1d1,", "s2d1,", "s1d2].", "Next", "we'll", "discuss", "a", "two-pass", "method", "to", "calculate", "these", "scores.", "For", "each", "query", "keyword,", "since", "it", "has", "inverted", "lists", "in", "multiple", "LSM", "segments,", "in", "order", "to", "compute", "its", "global", "IDF,", "we", "need", "to", "know", "the", "frequency", "of", "this", "word", "in", "each", "segment.", "In", "the", "first", "pass,", "we", "access", "each", "segment", "to", "retrieve", "the", "frequency", "of", "each", "query", "keyword,", "as", "well", "as", "the", "number", "of", "documents", "within", "the", "segment,", "and", "use", "these", "values", "to", "calculate", "the", "IDF's", "of", "the", "query", "keywords.", "In", "the", "second", "pass,", "within", "each", "segment,", "we", "traverse", "the", "inverted", "list", "of", "a", "query", "keyword,", "and", "use", "the", "(local)", "TF", "for", "each", "document", "and", "the", "(global)", "IDF", "of", "the", "keyword", "to", "compute", "the", "TF-IDF", "value", "for", "this", "keyword", "and", "this", "document.", "We", "accumulate", "the", "product", "of", "this", "value", "and", "the", "corresponding", "TF-IDF", "value", "of", "the", "query", "keyword", "in", "order", "to", "compute", "the", "dot", "product", "of", "the", "document", "and", "the", "query.", "Furthermore,", "for", "each", "document,", "since", "we", "need", "to", "normalize", "its", "TF-IDF", "vector", "by", "its", "length,", "we", "also", "need", "to", "accumulate", "the", "squares", "of", "the", "TF-IDF's", "of", "the", "query", "keywords", "in", "this", "document.", "The", "following", "is", "the", "pseudo", "code:", "Map<DocID,", "Double>", "dotProductAccumulator;", "//", "DocID", "is", "<SegmentID,", "LocalDocID>", "Map<DocID,", "Double>", "vectorLengthAccumulator;", "for", "each", "segment:", "for", "each", "query", "token", "w:", "for", "each", "docID", "on", "the", "postingList", "of", "w:", "tfidf", "=", "TF(w,", "docID)", "*", "IDF(w);", "dotProductAccumulator[docID]", "+=", "tfidf", "*", "queryTfIdf[w];", "vectorLengthAccumulator[docID]", "+=", "tfidf", "^", "2;", "for", "each", "docID", "in", "this", "segment", "score(docID)", "=", "dotProductAccumulator[docID]", "/", "sqrt(vectorLengthAccumulator[docID]);", "In", "this", "method,", "we", "need", "to", "store", "a", "double", "(IDF)", "for", "each", "query", "keyword.", "In", "addition,", "for", "each", "segment,", "for", "each", "of", "its", "documents,", "we", "need", "to", "store", "2", "doubles.", "Notice", "that", "since", "we", "want", "to", "return", "topK", "documents,", "we", "need", "to", "maintain", "a", "global", "priority", "queue", "of", "K", "docIDs.", "After", "visiting", "each", "segment,", "we", "only", "need", "to", "add", "the", "top-K", "docIDs", "of", "this", "segment", "into", "this", "priority", "query", "and", "free", "the", "space", "for", "the", "docIDs", "of", "this", "segment.", "To", "implement", "the", "method,", "you", "need", "the", "following", "API", "functions", "for", "each", "segment:", "public", "int", "getNumDocuments(int", "segmentNum);", "public", "int", "getDocumentFrequency(int", "segmentNum,", "String", "token);", "/**", "*", "Performs", "top-K", "ranked", "search", "using", "TF-IDF.", "*", "Returns", "an", "iterator", "that", "returns", "the", "top", "K", "documents", "with", "highest", "TF-IDF", "scores.", "*", "*", "Each", "element", "is", "a", "pair", "of", "<Document,", "Double", "(TF-IDF", "Score)>.", "*", "*", "If", "parameter", "`topK`", "is", "null,", "then", "returns", "all", "the", "matching", "documents.", "*", "*", "Unlike", "Boolean", "Query", "and", "Phrase", "Query", "where", "order", "of", "the", "documents", "doesn't", "matter,", "*", "for", "ranked", "search,", "order", "of", "the", "document", "returned", "by", "the", "iterator", "matters.", "*", "*", "@param", "keywords,", "a", "list", "of", "keywords", "in", "the", "query", "*", "@param", "topK,", "number", "of", "top", "documents", "weighted", "by", "TF-IDF,", "all", "documents", "if", "topK", "is", "null", "*", "@return", "a", "iterator", "of", "top-k", "ordered", "documents", "matching", "the", "query", "*/", "public", "Iterator<Pair<Document,", "Double>>", "searchTfIdf(List<String>", "keywords,", "Integer", "topK)", "Task", "2:", "Implement", "PageRank.", "Note:", "the", "description", "of", "this", "task", "could", "have", "minor", "changes.", "In", "this", "task,", "you'll", "run", "the", "PageRank", "algorithm", "on", "the", "collection", "of", "ICS", "websites", "we", "provided,", "index", "all", "the", "ICS", "website", "documents,", "and", "combine", "PageRank", "with", "the", "TF-IDF", "weighted", "search", "results.", "Download", "the", "provided", "\u200b", "webpages", "zip", "file", ".", "Here", "are", "the", "description", "of", "what's", "in", "the", "zip", "file:", "The", "\"url.tsv\"", "file", "contains", "the", "mapping", "of", "a", "webpage", "ID", "to", "the", "original", "URL", "of", "the", "webpage.", "The", "\"id-graph.tsv\"", "file", "contains", "the", "graph", "of", "the", "webpages.", "Each", "line", "is", "an", "edge", "in", "the", "graph", "represented", "as", "a", "pair", "of", "two", "document", "IDs.", "The", "first", "is", "the", "\"from\"", "documentID", "and", "the", "second", "is", "the", "\"to\"", "document", "ID.", "The", "\"cleaned\"", "folder"], "content_hash": "13d8fcf8f2307eb73a516f73cba26ec3"}