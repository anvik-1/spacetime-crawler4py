{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2019-winter-project3?action=diff&version=1", "word_count": 3031, "words": ["cs122b-2019-winter-project3", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Initial", "Version", "and", "Version", "1", "of", "cs122b-2019-winter-project3", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Jan", "31,", "2019,", "6:05:39", "PM", "(", "7", "years", "ago)", "Author:", "Qiushi", "Bai", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs122b-2019-winter-project3", "v1", "v1", "1", "[[PageOutline]]", "2", "3", "=", "CS122B", "Project", "3:", "reCaptcha,", "HTTPS,", "Stored", "Procedure,", "XML", "Parsing", "=", "4", "'''Due:", "Week", "7", "Thursday,", "05/17/2018", "11:45", "pm.", "Due", "on", "Github.'''", "5", "6", "=", "Tasks", "=", "7", "1.", "(Optional)", "[#RegisterDomain", "Register", "a", "domain", "name", "for", "Fabflix]", "8", "1.", "[#reCAPTCHA", "Adding", "reCAPTCHA", "to", "Project", "2]", "9", "1.", "[#HTTPS", "Adding", "HTTPS", "to", "Project", "2]", "10", "1.", "[#PreparedStatement", "Use", "PreparedStatement", "in", "the", "query]", "11", "1.", "[#Encryption", "Update", "Encrypted", "password", "in", "database]", "12", "1.", "[#Dashboard", "Implementing", "a", "Dashboard", "using", "Stored", "Procedure]", "13", "1.", "[#XMLParsing", "Importing", "large", "XML", "data", "files", "into", "the", "Fabflix", "database]", "14", "15", "----", "16", "[[Span(id=RegisterDomain)]]", "17", "18", "==", "Task", "1", "(Optional):", "Register", "a", "domain", "name", "for", "Fabflix", "==", "19", "If", "you", "are", "tired", "of", "using", "an", "IP", "address", "to", "visit", "your", "AWS", "instance", "and", "want", "to", "make", "it", "\"real,\"", "you", "can", "register", "a", "domain", "name", "from", "a", "registrar", "company", "such", "as", "[http://godaddy.com", "Godaddy].", "Then", "use", "the", "AWS", "instance", "to", "do", "the", "hosting.", "Now", "we", "are", "open", "for", "real", "business!", "20", "21", "----", "22", "23", "==", "Improve", "the", "security", "of", "the", "Fabflix", "website", "==", "24", "25", "A", "real", "business", "needs", "to", "treat", "security", "issues", "seriously.", "In", "the", "following", "4", "tasks,", "you", "will", "improve", "the", "security", "of", "your", "website", "in", "project", "2", "in", "various", "ways:", "26", "-", "reCAPTCHA", "enhances", "security", "by", "preventing", "bots", "and", "only", "allowing", "real", "human", "users.", "27", "-", "HTTPS", "enhances", "security", "by", "securing", "the", "process", "when", "the", "client", "sends", "sensitive", "information", "to", "the", "server.", "28", "-", "Encrypting", "the", "password", "improves", "security", "in", "the", "case", "of", "your", "database", "gets", "attacked,", "the", "hacker", "won't", "be", "able", "to", "get", "the", "real", "sensitive", "information,", "such", "as", "password.", "29", "-", "Use", "prepared", "statements", "can", "help", "prevent", "a", "very", "common", "kind", "of", "attack:", "SQL", "injection", "attack.", "30", "31", "32", "[[Span(id=reCAPTCHA)]]", "33", "34", "==", "Task", "2:", "Adding", "reCAPTHA", "to", "Project", "2", "==", "35", "Improve", "the", "user-authentication", "process", "of", "project", "2", "by", "adding", "a", "module", "that", "verifies", "real", "users", "and", "blocks", "bots.", "36", "37", "1.", "Go", "to", "[https://github.com/UCI-Chenli-teaching/project3-recaptcha-example", "project3-recaptcha-example],", "follow", "the", "README", "instructions", "on", "the", "Github", "Page", "the", "code.", "38", "1.", "Get", "a", "[https://www.google.com/recaptcha/intro/index.html", "reCAPTCHA]", "from", "Google.", "Add", "{{{", "public", "IP", "of", "your", "AWS", "instance", "}}}", "and", "{{{", "localhost", "}}}", "to", "the", "domain.", "You", "will", "get", "a", "''secret", "key''", "and", "a", "''site", "key''.", "39", "1.", "Test", "the", "page", "http://localhost:8080/project3-recaptcha-example", "to", "see", "if", "reCAPTHA", "works.", "40", "1.", "Apply", "the", "same", "logic", "to", "your", "project", "2", "by", "making", "the", "necessary", "changes", "on", "the", "login", "frontend", "and", "backend", "logic.", "41", "42", "Note", "that", "if", "you", "AWS", "instance", "is", "restarted,", "the", "public", "IP", "will", "change,", "and", "you", "need", "to", "add", "the", "new", "IP", "to", "Google", "reCAPTHA", "console", "as", "well.", "43", "44", "[[Span(id=HTTPS)]]", "45", "46", "==", "Task", "3:", "Adding", "HTTPS", "to", "Project", "2", "==", "47", "HTTPS", "makes", "your", "website", "substantially", "more", "secure", "from", "hacking", "and", "other", "security", "breaches.", "HTTPS", "makes", "sure", "that", "the", "client", "can", "safely", "send", "sensitive", "data", "to", "your", "server", "without", "the", "risk", "of", "leaking", "the", "data", "in", "the", "transfer", "process.", "48", "49", "See", "this", "[http://tecadmin.net/configure-ssl-certificate-in-tomcat/", "reference]", "on", "how", "to", "configure", "Tomcat", "to", "enable", "HTTPS", "connections.", "50", "51", "Step", "1:", "On", "your", "AWS", "instance,", "use", "the", "following", "command", "to", "create", "a", "keystore", "to", "be", "used", "by", "Tomcat.", "Remember", "what", "password", "you", "use", "for", "the", "keystore.", "Our", "example", "uses", "\"changeit\".", "52", "53", "In", "the", "following", "steps,", "\"/home/ubuntu/tomcat\"", "is", "an", "example", "of", "your", "tomcat", "installation", "directory", "on", "AWS.", "You", "need", "to", "replace", "it", "with", "your", "own", "directory.", "54", "55", "56", "{{{", "57", "sudo", "keytool", "-genkey", "-alias", "fabflix", "-keyalg", "RSA", "-keystore", "/home/ubuntu/tomcat/keystore", "58", "59", "}}}", "60", "Step", "2:", "Uncomment", "the", "`Connector`", "tag", "in", "`/home/ubuntu/tomcat/conf/server.xml`,", "which", "has", "port=\"8443\"", "and", "defines", "an", "SSL", "HTTP/1.1", "connector.", "Modify", "it", "and", "use", "the", "following", "configuration:", "61", "62", "{{{", "63", "<Connector", "port=\"8443\"", "64", "protocol=\"HTTP/1.1\"", "65", "connectionTimeout=\"20000\"", "66", "redirectPort=\"8443\"", "67", "SSLEnabled=\"true\"", "68", "scheme=\"https\"", "69", "secure=\"true\"", "70", "sslProtocol=\"TLS\"", "71", "keystoreFile=\"/home/ubuntu/tomcat/keystore\"", "72", "keystorePass=\"changeit\"", "/>", "73", "}}}", "74", "Step", "3:", "Restart", "tomcat:", "75", "76", "{{{", "77", "go", "to", "your", "tomcat", "directory.", "Do", "\"./bin/shutdown.sh\"", "then", "\"./bin/startup.sh\"", "78", "}}}", "79", "At", "this", "point,", "https://[YOUR_IP]:8443/manager/html", "should", "also", "an", "entry", "point", "to", "Tomcat.", "Note", "that", "it", "uses", "the", "secure", "kind", "of", "http", "(https)", "and", "a", "different", "port,", "which", "is", "8443", "by", "default.", "Make", "sure", "to", "open", "the", "port", "8443", "on", "your", "AWS", "instance.", "80", "81", "Step", "4:", "Limit", "a", "Tomcat", "application", "to", "HTTPS", "only.", "Currently,", "http://YOUR_IP:8080/manager/html", "entry", "(which", "uses", "HTTP)", "is", "still", "open.", "In", "order", "to", "disable", "HTTP", "and", "enable", "HTTPS", "only,", "change", "your", "!project3-recapthca-example", "application's", "web.xml", "by", "adding", "the", "following", "code", "before", "the", "\"</web-app>\"", "tag:", "82", "83", "{{{", "84", "<security-constraint>", "85", "<web-resource-collection>", "86", "<web-resource-name>HTTPSOnly</web-resource-name>", "87", "<url-pattern>/*</url-pattern>", "88", "</web-resource-collection>", "89", "<user-data-constraint>", "90", "<transport-guarantee>CONFIDENTIAL</transport-guarantee>", "91", "</user-data-constraint>", "92", "</security-constraint>", "93", "}}}", "94", "This", "setting", "will", "force", "all", "HTTP", "requests", "to", "this", "application", "to", "get", "redirected", "to", "the", "corresponding", "HTTPS", "URL.", "Reload", "the", "application", "to", "see", "if", "the", "redirection", "works", "for", "the", "URL", "http://YOUR_IP:8080/project3-recapthca-example/.", "Read", "this", "[http://www.itworld.com/article/2769041/development/how-to-configure-tomcat-to-always-require-https.html", "reference]", "on", "more", "details", "about", "how", "to", "configure", "Tomcat", "to", "always", "require", "HTTPS.", "95", "96", "Step", "5:", "Make", "necessary", "changes", "to", "your", "project", "2", "to", "use", "HTTPS", "always", "with", "HTTP", "disabled.", "97", "98", "99", "[[Span(id=PreparedStatement)]]", "100", "101", "==", "Task", "4:", "Use", "prepared", "statements", "in", "your", "server", "code", "when", "sending", "a", "query", "==", "102", "103", "Previously,", "we", "generate", "the", "SQL", "query", "by", "concatenating", "the", "parameter", "value", "with", "a", "template", "string,", "then", "it", "will", "be", "passed", "to", "the", "database", "to", "be", "compiled", "and", "executed.", "This", "string", "manipulation", "approach", "leaves", "us", "very", "vulnerable", "to", "[https://www.wordfence.com/learn/how-to-prevent-sql-injection-attacks/", "SQL", "Injection", "Attack].", "We", "can", "prevent", "this", "by", "using", "{{{", "PreparedStatement", "}}}.", "!PreparedStatement", "pre-compiles", "the", "sql", "template", "and", "when", "database", "executes", "the", "query,", "it", "treats", "the", "parameters", "as", "values,", "without", "messing", "it", "with", "the", "SQL", "query", "itself.", "104", "105", "You", "can"], "content_hash": "949ed65d48213cb4b77d9af7f31aac3a"}