{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project2?action=diff&version=1", "word_count": 1101, "words": ["cs221-2019-spring-project2", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Initial", "Version", "and", "Version", "1", "of", "cs221-2019-spring-project2", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Apr", "17,", "2019,", "4:39:24", "PM", "(", "7", "years", "ago)", "Author:", "Zuozhi", "Wang", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs221-2019-spring-project2", "v1", "v1", "1", "2", "=", "CS221:", "Project", "2", "-", "II:", "Inverted", "index,", "boolean", "search", "=", "3", "'''Test", "Cases", "Due:", "Week", "4", "Tu.", "(Apr", "23),", "Due", "on", "Github", "as", "Pull", "Requests'''[[BR]]", "4", "'''Review", "Due:", "Week", "4,", "Fri.", "(Apr", "26),", "Due", "on", "Github", "as", "Pull", "Requests", "Comments'''[[BR]]", "5", "'''Final", "Code", "Due:", "Week", "5,", "Sun.", "(May.", "5),", "Due", "on", "Github.'''[[BR]]", "6", "7", "=", "Overview", "=", "8", "9", "==", "Coding", "Tasks", "==", "10", "1.", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "(7", "points)", "11", "1.", "Implement", "merge", "of", "inverted", "index", "segments.", "(4", "points)", "12", "1.", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "(6", "points)", "13", "1.", "(Optional)", "Extra", "Credit:", "Implement", "a", "dynamic-programming-based", "Chinese", "or", "Japanese", "tokenizer.", "(3", "points)", "14", "15", "==", "Testing", "Tasks", "==", "16", "1.", "Write", "at", "least", "2", "test", "cases", "for", "a", "task", "(3", "points)", "17", "1.", "Review", "the", "test", "cases", "of", "two", "teams", "(2", "points)", "18", "19", "Total:", "17", "points", "(+", "3", "extra", "credits)", "20", "21", "Project", "2:", "Implement", "an", "disk-based", "inverted", "index.", "22", "In", "this", "project,", "you'll", "be", "implementing", "a", "disk-based", "inverted", "index", "and", "the", "search", "operations.", "23", "24", "On", "a", "high", "level,", "inverted", "index", "stores", "the", "mapping", "from", "keywords", "to", "the", "documents", "they", "appear", "in.", "25", "A", "simple", "in-memory", "structure", "could", "be", "`Map<String,", "List<Integer>>`,", "where", "each", "key", "is", "a", "keyword", "token", "(also", "called", "term),", "26", "and", "each", "value", "is", "a", "list", "of", "(often", "sorted)", "document", "IDs", "(also", "called", "postings).", "27", "28", "In", "this", "project,", "the", "disk-based", "index", "structure", "is", "similar", "to", "the", "idea", "of", "LSM", "(Log-Structured", "Merge", "tree).", "29", "A", "general", "idea", "will", "be", "described.", "The", "details", "should", "follow", "what", "Professor", "says", "in", "the", "lecture.", "30", "31", "The", "inverted", "index", "consists", "of", "multiple", "index", "segments,", "where", "each", "segment", "is", "only", "created", "and", "then", "appended.", "32", "Once", "each", "segment", "is", "written", "to", "disk,", "it", "becomes", "immutable", "and", "is", "never", "changed", "again.", "33", "34", "Each", "index", "segment", "is", "a", "fully", "searchable", "inverted", "index,", "35", "it", "contains", "the", "inverted", "index", "structure", "as", "well", "the", "document", "store", "(map", "from", "documentID", "to", "actual", "document),", "36", "the", "document", "ID", "of", "each", "segment", "is", "local", "to", "the", "segment", "itself", "and", "it", "is", "invisible", "to", "the", "user.", "37", "38", "When", "searching", "a", "keyword,", "all", "segments", "are", "searched,", "and", "the", "result", "documents", "from", "each", "segment", "are", "combined.", "39", "40", "Example:", "41", "42", "Add", "documents", "\"cat", "dog\"", "and", "\"cat", "elephant\",", "then", "flush", "to", "write", "Segment0.", "43", "Segment0:", "44", "----------", "45", "InvertIndex:", "{\"cat\":", "[0,", "1],", "\"dog\":", "[0],", "\"elephant\":", "[1]}", "46", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"cat", "elephant\"}", "47", "----------", "48", "49", "Then", "add", "documents", "\"cat", "dog\"", "and", "\"wolf", "dog\",", "and", "flush", "to", "write", "a", "new", "Segment,", "Segment1.", "50", "Segment1:", "51", "----------", "52", "InvertIndex:", "{\"cat\":", "[0],", "\"dog\":", "[0,", "1],", "\"wolf\":", "[1]}", "53", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"wolf", "dog\"}", "54", "----------", "55", "56", "When", "searching", "the", "word", "\"cat\",", "first", "search", "Segment0", "and", "get", "[\"cat", "dog\",", "\"cat", "elephant\"],", "57", "then", "search", "Segment1", "and", "get", "[\"cat", "dog\"],", "then", "combine", "results", "to", "get", "[\"cat", "dog\",", "\"cat", "elephant\",", "\"cat", "dog\"]", "58", "59", "60", "Task", "1:", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "61", "62", "In", "this", "task,", "you'll", "implement", "the", "disk", "file", "structure", "of", "an", "inverted", "index", "segment.", "63", "When", "a", "document", "is", "added", "via", "`addDocument()`,", "it", "should", "be", "first", "stored", "in", "the", "in-memory", "buffer.", "64", "Whenever", "the", "number", "of", "documents", "reached", "default_flush_threshold,", "or", "function", "`flush()`", "is", "called,", "65", "you", "should", "create", "a", "new", "inverted", "index", "segment", "with", "the", "documents", "in", "the", "buffer.", "66", "67", "The", "specific", "format", "of", "the", "inverted", "lists", "should", "in", "general", "follow", "what", "Professor", "says", "in", "lecture.", "68", "You", "also", "have", "freedom", "to", "design", "the", "format", "to", "make", "it", "more", "efficient", "to", "store", "or", "search.", "69", "In", "principle,", "the", "terms", "can", "be", "loaded", "into", "memory,", "but", "all", "the", "posting", "lists", "cannot", "be", "entirely", "loaded", "into", "memory.", "70", "71", "Functions", "to", "implement,", "see", "each", "function", "signature", "to", "check", "the", "details:", "72", "{@link", "this#addDocument};", "73", "{@link", "this#flush};", "74", "{@link", "this#documentIterator};", "75", "{@link", "this#getNumSegments};", "76", "{@link", "this#getIndexSegment};", "77", "78", "79", "Task", "2:", "Implement", "merge", "of", "inverted", "index", "segments.", "80", "81", "In", "this", "task,", "you'll", "implement", "merging", "index", "segments.", "We", "cannot", "let", "number", "of", "segments", "grow", "infinitely", "because", "it", "82", "would", "mean", "searching", "a", "keyword", "needs", "to", "go", "through", "a", "lot", "of", "documents.", "83", "84", "Whenever", "the", "number", "of", "segments", "has", "reached", "the", "default_merge_threshold,", "or", "`mergeAllSegments()`", "is", "called,", "85", "you", "need", "to", "merge", "*all*", "segments", "in", "the", "inverted", "index", "pair-wise.", "86", "You", "could", "assume", "merging", "only", "happens", "when", "you", "have", "an", "even", "number", "of", "segments.", "87", "88", "When", "merging", "two", "segments", "into", "one,", "since", "each", "segment", "has", "its", "own", "local", "document", "ID,", "you", "need", "to", "bump", "up", "all", "89", "document", "IDs", "in", "one", "of", "the", "segments.", "90", "As", "an", "example,", "Segment0", "contains", "local", "docID", "1-100,", "Segment1", "contains", "local", "docID", "1-100,", "91", "first", "find", "the", "max", "docID", "in", "Segment0,", "which", "is", "100,", "then", "bump", "up", "Segment1's", "docIDs", "to", "become", "101-200,", "then", "do", "the", "merge.", "92", "93", "Functions", "to", "implement:", "94", "{@link", "this#mergeAllSegments}", "95", "96", "97", "Task", "3:", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "98", "99", "In", "this", "task,", "you'll", "implement", "searching", "on", "top", "of", "the", "inverted", "index.", "100", "You", "could", "assume", "all", "documents", "are", "flushed", "to", "disk", "index", "segments", "when", "doing", "search.", "101", "102", "For", "a", "query", "keyword,", "you", "need", "to", "first", "analyze", "it", "using", "the", "analyzer.", "103", "You", "could", "assume", "after", "tokenization", "and", "stemming,", "the", "result", "only", "has", "1", "token,", "or", "is", "empty", "(such", "as", "the", "query", "is", "a", "stop", "ord).", "104", "If", "the", "query", "is", "empty,", "searching", "should", "not", "return", "any", "results.", "105", "106", "Functions", "to", "implement:", "107", "{@link", "this#searchQuery}", "108", "{@link", "this#searchAndQuery}", "109", "{@link", "this#searchOrQuery}", "110", "111", "Task", "4", "(Optional"], "content_hash": "1d255d4a8465406219a7122115927efa"}