{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project2?version=2", "word_count": 1283, "words": ["cs221-2019-spring-project2", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "wiki:", "cs221-2019-spring-project2", "Context", "Navigation", "\u2190", "Previous", "Version", "View", "Latest", "Version", "Next", "Version", "\u2192", "Version", "2", "(modified", "by", "Zuozhi", "Wang", ",", "7", "years", "ago", ")", "(", "diff", ")", "--", "CS221:", "Project", "2", "-", "II:", "Inverted", "index,", "boolean", "search", "Test", "Cases", "Due:", "Week", "4", "Tu.", "(Apr", "23),", "Due", "on", "Github", "as", "Pull", "Requests", "Review", "Due:", "Week", "4,", "Fri.", "(Apr", "26),", "Due", "on", "Github", "as", "Pull", "Requests", "Comments", "Final", "Code", "Due:", "Week", "5,", "Sun.", "(May.", "5),", "Due", "on", "Github.", "Overview", "Coding", "Tasks", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "(6", "points)", "Implement", "merge", "of", "inverted", "index", "segments.", "(3", "points)", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "(5", "points)", "(Optional", "Extra", "Credit):", "Implement", "deletions.", "(2", "points)", "(Optional", "Extra", "Credit):", "Implement", "compression.", "(2", "points)", "Testing", "Tasks", "Write", "at", "least", "2", "test", "cases", "for", "a", "task", "(3", "points)", "Review", "the", "test", "cases", "of", "two", "teams", "(2", "points)", "Total:", "19", "points", "(+", "4", "extra", "credits)", "In", "this", "project,", "you'll", "be", "implementing", "a", "disk-based", "inverted", "index", "and", "the", "search", "operations.", "On", "a", "high", "level,", "inverted", "index", "stores", "the", "mapping", "from", "keywords", "to", "the", "documents", "they", "appear", "in.", "A", "simple", "in-memory", "structure", "could", "be", "Map<String,", "List<Integer>>", ",", "where", "each", "key", "is", "a", "keyword", "token", "(also", "called", "term),", "and", "each", "value", "is", "a", "list", "of", "(often", "sorted)", "document", "IDs", "(also", "called", "postings).", "In", "this", "project,", "the", "disk-based", "index", "structure", "is", "similar", "to", "the", "idea", "of", "LSM", "(Log-Structured", "Merge", "tree).", "A", "general", "idea", "will", "be", "described.", "The", "details", "should", "follow", "what", "Professor", "says", "in", "the", "lecture.", "The", "inverted", "index", "consists", "of", "multiple", "index", "segments,", "where", "each", "segment", "is", "only", "created", "and", "then", "appended.", "Once", "each", "segment", "is", "written", "to", "disk,", "it", "becomes", "immutable", "and", "is", "never", "changed", "again.", "Each", "index", "segment", "is", "a", "fully", "searchable", "inverted", "index,", "it", "contains", "the", "inverted", "index", "structure", "as", "well", "the", "document", "store", "(map", "from", "documentID", "to", "actual", "document),", "the", "document", "ID", "of", "each", "segment", "is", "local", "to", "the", "segment", "itself", "and", "it", "is", "invisible", "to", "the", "user.", "When", "searching", "a", "keyword,", "all", "segments", "are", "searched,", "and", "the", "result", "documents", "from", "each", "segment", "are", "combined.", "Example:", "Add", "documents", "\"cat", "dog\"", "and", "\"cat", "elephant\",", "then", "flush", "to", "write", "Segment0.", "Segment0:", "----------", "InvertIndex:", "{\"cat\":", "[0,", "1],", "\"dog\":", "[0],", "\"elephant\":", "[1]}", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"cat", "elephant\"}", "----------", "Then", "add", "documents", "\"cat", "dog\"", "and", "\"wolf", "dog\",", "and", "flush", "to", "write", "a", "new", "Segment,", "Segment1.", "Segment1:", "----------", "InvertIndex:", "{\"cat\":", "[0],", "\"dog\":", "[0,", "1],", "\"wolf\":", "[1]}", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"wolf", "dog\"}", "----------", "When", "searching", "the", "word", "\"cat\",", "first", "search", "Segment0", "and", "get", "[\"cat", "dog\",", "\"cat", "elephant\"],", "then", "search", "Segment1", "and", "get", "cat", "dog", ",", "then", "combine", "results", "to", "get", "[\"cat", "dog\",", "\"cat", "elephant\",", "\"cat", "dog\"]", "Coding", "Tasks", "Task", "1:", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "In", "this", "task,", "you'll", "implement", "the", "disk", "file", "structure", "of", "an", "inverted", "index", "segment.", "When", "a", "document", "is", "added", "via", "addDocument()", ",", "it", "should", "be", "first", "stored", "in", "the", "in-memory", "buffer.", "Whenever", "the", "number", "of", "documents", "reached", "default_flush_threshold,", "or", "function", "flush()", "is", "called,", "you", "should", "create", "a", "new", "inverted", "index", "segment", "with", "the", "documents", "in", "the", "buffer.", "The", "specific", "format", "of", "the", "inverted", "lists", "should", "in", "general", "follow", "what", "Professor", "says", "in", "lecture.", "You", "also", "have", "freedom", "to", "design", "the", "format", "to", "make", "it", "more", "efficient", "to", "store", "or", "search.", "In", "principle,", "the", "terms", "can", "be", "loaded", "into", "memory,", "but", "all", "the", "posting", "lists", "cannot", "be", "entirely", "loaded", "into", "memory.", "Your", "implementation", "should", "be", "in", "the", "InvertedIndexManger", "class.", "private", "InvertedIndexManager(String", "indexFolder,", "Analyzer", "analyzer)", "{", "}", "/**", "*", "Creates", "an", "inverted", "index", "manager", "with", "the", "folder", "and", "an", "analyzer", "*/", "public", "static", "InvertedIndexManager", "createOrOpen(String", "indexFolder,", "Analyzer", "analyzer)", "{", "}", "Functions", "to", "implement:", "/**", "*", "Adds", "a", "document", "to", "the", "inverted", "index.", "*", "Document", "should", "live", "in", "a", "in-memory", "buffer", "until", "`flush()`", "is", "called", "to", "write", "them", "to", "disk.", "*", "@param", "document", "*/", "public", "void", "addDocument(Document", "document);", "/**", "*", "Flushes", "all", "the", "documents", "in", "the", "buffer", "to", "disk.", "If", "the", "buffer", "is", "empty,", "it", "should", "not", "do", "anything.", "*", "flush()", "creates", "a", "new", "index", "segment", "containing", "the", "inverted", "index", "and", "the", "corresponding", "document", "store.", "*/", "public", "void", "flush();", "/**", "*", "Iterates", "through", "all", "the", "documents", "in", "all", "inverted", "index", "segments.", "*/", "public", "Iterator<Document>", "documentIterator();", "/**", "*", "Gets", "the", "total", "number", "of", "segments", "in", "the", "inverted", "index.", "*", "This", "function", "is", "used", "for", "checking", "correctness", "in", "test", "cases.", "*", "*", "@return", "number", "of", "index", "segments.", "*/", "public", "int", "getNumSegments();", "/**", "*", "Reads", "an", "inverted", "index", "segment", "into", "memory", "based", "on", "segmentNum.", "*", "This", "function", "is", "mainly", "used", "for", "checking", "correctness", "in", "test", "cases.", "*", "*", "@param", "segmentNum", "n-th", "segment", "in", "the", "inverted", "index", "(start", "from", "0).", "*", "@return", "in-memory", "data", "structure", "with", "all", "contents", "in", "the", "index", "segment.", "*/", "public", "InvertedIndexSegmentForTest", "getIndexSegment(int", "segmentNum);", "Task", "2:", "Implement", "merge", "of", "inverted", "index", "segments.", "In", "this", "task,", "you'll", "implement", "merging", "index", "segments.", "We", "cannot", "let", "number", "of", "segments", "grow", "infinitely", "because", "it", "would", "mean", "searching", "a", "keyword", "needs", "to", "go", "through", "a", "lot", "of", "documents.", "Whenever", "the", "number", "of", "segments", "has", "reached", "the", "default_merge_threshold,", "or", "mergeAllSegments()", "is", "called,", "you", "need", "to", "merge", "*all*", "segments", "in", "the", "inverted", "index", "pair-wise.", "You", "could", "assume", "merging", "only", "happens", "when", "you", "have", "an", "even", "number", "of", "segments.", "When", "merging", "two", "segments", "into", "one,", "since", "each", "segment", "has", "its", "own", "local", "document", "ID,", "you", "need", "to", "bump", "up", "all", "document", "IDs", "in", "one", "of", "the", "segments.", "As", "an", "example,", "Segment0", "contains", "local", "docID", "1-100,", "Segment1", "contains", "local", "docID", "1-100,", "first", "find", "the", "max", "docID", "in", "Segment0,", "which", "is", "100,", "then", "bump", "up", "Segment1's", "docIDs", "to", "become", "101-200,", "then", "do", "the", "merge.", "Functions", "to", "implement:", "/**", "*", "Merges", "all", "the", "index", "segments", "of", "the", "inverted", "index", "pair-wise.", "*/", "public", "void", "mergeAllSegments();", "Task", "3:", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "In", "this", "task,", "you'll", "implement", "searching", "on", "top", "of", "the", "inverted", "index.", "You", "could", "assume", "all", "documents", "are", "flushed", "to", "disk", "index", "segments", "when", "doing", "search.", "For", "a", "query", "keyword,", "you", "need", "to", "first", "analyze", "it", "using", "the"], "content_hash": "471ff04350de32a6d0cc85706ed8d1d2"}