{"url": "http://www.ics.uci.edu/~eppstein/pubs/Epp-IJCAI-85.lsp", "word_count": 7978, "words": [";;", "Invert", "-", "program", "to", "compute", "inverses", "of", "recursive", "functions.", ";;", "Written", "by", "David", "Eppstein", "at", "Columbia", "University", "starting", "26-Oct-84.", ";;", ";;", "This", "program", "takes", "recursive", "definitions", "of", "one", "or", "more", "functions", ";;", "with", "some", "set", "of", "arguments,", "and", "computes", "recursive", "definitions", "that", ";;", "given", "the", "values", "returned", "from", "the", "original", "functions", "calculate", ";;", "what", "the", "original", "arguments", "must", "have", "been.", ";;", ";;", "The", "method", "is", "largely", "based", "on", "\"Inversion", "of", "Applicative", "Functions\",", ";;", "Richard", "E.", "Korf,", "Carnegie", "Mellon", "University", "Computer", "Science", "Department.", ";;", "However,", "we", "perform", "many-to-many", "inversions", "(such", "as", "CAR", "and", "CDR", "to", "CONS)", ";;", "all", "at", "once", "rather", "than", "doing", "it", "one", "at", "a", "time", "and", "fixing", "up", "later.", ";;", "Also,", "we", "replace", "conditions", "with", "equivalent", "conditions", "on", "a", "somewhat", ";;", "ad", "hoc", "basis", "rather", "than", "using", "the", "formula", "in", "Korf's", "paper,", "which", "has", ";;", "no", "easy", "way", "of", "guaranteeing", "that", "the", "new", "condition", "is", "equivalent", "to", "the", "old", ";;", "or", "of", "making", "sure", "that", "a", "function", "defined", "with", "it", "will", "be", "computable.", ";;", ";;", "To", "do:", ";;", ";;", "(1)", "Make", "insertion", "and", "deletion", "of", "tautologies", "smarter", ";;", "(so", "can", "use", "variables", "that", "are", "conditioned", "NIL", "rather", "than", "const", "etc).", ";;", ";;", "(2)", "Use", "conditions", "in", "context", "to", "help", "find", "replacement", "conditions", ";;", "(again,", "so", "can", "use", "conditioned", "variables).", ";;", ";;", "(3)", "Improve", "conditional", "system;", "for", "instance", "we", "need", "GREATERP", ";;", "to", "be", "able", "to", "invert", "SUM/DIFF,", "and", "that", "would", "also", "be", "useful", ";;", "for", "recursions", "going", "to", "constants", "other", "than", "zero.", ";;", ";;", "(4)", "Improve", "expression", "class", "finder", "to", "know", "about", "dependencies", "on", ";;", "argument", "class", "(so", "can", "do", "both-ways-at-once", "def", "of", "NEGATE).", ";;", "(definv", "(foo", "fah)", "(bar", "baz)", "foo-body", "fah-body)", ";;", "Defines", "foo", "to", "be", "(lambda", "(bar", "baz)", "foo-body)", "and", "similarly", ";;", "with", "fah.", "Then", "it", "tries", "to", "find", "inverses", "bar", "and", "baz", "such", "that", ";;", "(bar", "(foo", "bar", "baz)", "(fah", "bar", "baz))", "=", "bar", "and", "similarly", "with", "baz.", ";;", "If", "it", "does", "so,", "it", "remembers", "all", "the", "definitions", "and", "returns", ";;", "(definv", "(bar", "baz)", "(foo", "fah)", "bar-body", "baz-body).", ";;", "Otherwise,", "it", "prints", "an", "error", "message", "and", "returns", "NIL.", "(defun", "definv", "fexpr", "(arg)", "(let", "((start", "(make-list", "(car", "arg)))", "(goal", "(make-list", "(cadr", "arg)))", "(start-bodies", "(cddr", "arg)))", "(and", "(all-atoms", "(append", "start", "goal))", "(no-duplications", "(append", "start", "goal))", "(make-sure-evaluable", "start-bodies", "goal)", "(check-consistency", "start", "goal", "start-bodies)", "(all-undefined", "goal)", "(set-classes", "start", "start-bodies)", "(invert", "start", "goal", "start-bodies)", "(add-inversion", "start", "goal)", "(add-definitions", "start", "goal", "start-bodies)", "(make-definv", "goal", "start))))", ";;", "Argument", "checking.", ";;", "We", "allow", "the", "user", "to", "specify", "just", "an", "atom", "for", "a", "single", "argument", "or", "function,", ";;", "rather", "than", "the", "list", "containing", "that", "atom.", "Here", "we", "detect", "that", "case", "and", ";;", "turn", "it", "into", "the", "complete", "list.", "(defun", "make-list", "(atom-or-list)", "(if", "(atom", "atom-or-list)", "(ncons", "atom-or-list)", "atom-or-list))", ";;", "Function", "and", "argument", "names", "are", "only", "allowed", "to", "be", "atoms.", ";;", "Here", "we", "make", "sure", "that", "this", "is", "the", "case,", "and", "if", "not", "complain", ";;", "and", "return", "failure", "from", "definv.", "(defun", "all-atoms", "(list)", "(cond", "((null", "list)", "t)", ";All", "ok", "((not", "(atom", "(car", "list)))", ";This", "one", "bad", "(format", "t", "\"~&Function", "or", "argument", "name", "not", "atomic:", "~S.~%\"", "(car", "list))", "(all-atoms", "(cdr", "list))", ";Check", "for", "errors", "in", "the", "rest", "nil)", ";Return", "failure", "from", "definv", "AND", "(t", "(all-atoms", "(cdr", "list)))))", ";Ok,", "try", "the", "next", "one", ";;", "The", "user", "must", "not", "specify", "the", "same", "name", "for", "more", "than", "one", "function,", ";;", "for", "more", "than", "one", "argument,", "or", "for", "both", "a", "function", "and", "an", "argument.", ";;", "Here", "we", "test", "whether", "the", "arguments", "to", "definv", "are", "acceptible", "by", "that", ";;", "criterion.", "If", "not,", "we", "tell", "the", "user", "which", "names", "were", "duplicates", ";;", "and", "return", "NIL,", "causing", "definv", "to", "fail.", "(defun", "no-duplications", "(list)", "(cond", "((null", "list)", "t)", ";All", "ok", "((memq", "(car", "list)", "(cdr", "list))", ";This", "one", "bad", "(format", "t", "\"~&Duplicate", "function", "or", "argument:", "~S.~%\"", "(car", "list))", "(no-duplications", "(cdr", "list))", ";Check", "rest", "anyway", "nil)", "(t", "(no-duplications", "(cdr", "list)))))", ";This", "ok,", "try", "rest", "of", "list", ";;", "Check", "evaluability", "of", "function", "bodies", "and", "conditions.", ";;", "We", "must", "make", "sure", "that", "all", "function", "bodies", "are", "evaluable,", "so", "that", ";;", "we", "can", "come", "up", "with", "a", "reasonable", "inverse.", "(defun", "make-sure-evaluable", "(start-bodies", "goal)", "(cond", "((expr-list-evaluable", "start-bodies", "goal)", "t)", "(t", "(format", "t", "\"~&Function", "bodies", "are", "not", "evaluable", "in", "terms", "of", "args.~%\")", "nil)))", ";;", "Here", "to", "check", "whether,", "knowing", "a", "list", "of", "variable", "values", "(the", "arguments", ";;", "to", "the", "function", "definitions),", "we", "can", "evaluate", "a", "list", "of", "expressions", ";;", "(the", "function", "bodies).", "(defun", "expr-list-evaluable", "(expr-list", "var-list)", "(cond", "((null", "expr-list)", "t)", "((expr-evaluable", "(car", "expr-list)", "var-list)", "(expr-list-evaluable", "(cdr", "expr-list)", "var-list))", "(t", "nil)))", ";;", "Here", "to", "check", "whether", "some", "specific", "condition", "or", "expression", "is", "evaluable,", ";;", "given", "the", "values", "of", "certain", "variables", "(the", "arguments", "to", "the", "expression).", ";;", "We", "can", "always", "evaluate", "NIL", "and", "numbers.", "(defun", "expr-evaluable", "(expr", "var-list)", "(cond", "((null", "expr)", "t)", "((numberp", "expr)", "t)", "((atom", "expr)", "(memq", "expr", "var-list))", "(t", "(expr-list-evaluable", "(cdr", "expr)", "var-list))))", ";;", "Definition", "consistency", "check.", ";;", "This", "function", "takes", "a", "list", "of", "function", "names,", "a", "list", "of", "their", "arguments,", ";;", "and", "a", "list", "of", "bodies,", "and", "makes", "sure", "those", "bodies", "all", "agree", "with", "the", ";;", "definitions", "we", "already", "know", "for", "those", "functions.", "If", "they", "agree", "it", "returns", ";;", "T,", "otherwise", "it", "prints", "a", "diagnostic", "message", "and", "returns", "NIL.", "(defun", "check-consistency", "(start", "goal", "start-bodies)", "(cond", "((and", "(null", "start)", "(null", "start-bodies))", "t)", "((null", "start-bodies)", "(format", "t", "\"~&More", "bodies", "than", "function", "names.~%\")", "nil)", "((null", "start-bodies)", "(format", "t", "\"~&More", "function", "names", "than", "bodies.~%\")", "nil)", "((not", "(consistent", "(car", "start)", "goal", "(car", "start-bodies)))", "(format", "t", "\"~&Inconsistent", "definition", "of", "~S.~%\"", "(car", "start))", "(check-consistency", "(cdr", "start)", "goal", "(cdr", "start-bodies))", "nil)", "(t", "(check-consistency", "(cdr", "start)", "goal", "(cdr", "start-bodies)))))", ";;", "Check", "one", "definition", "for", "consistency.", "(defun", "consistent", "(fun", "args", "body)", "(let", "((def", "(definition", "fun)))", "(cond", "((null", "def)", "t)", "((atom", "def)", "nil)", "(t", "(consistent-arg-replace", "args", "body", "(cadr", "def)", "(caddr", "def))))))", ";;", "Go", "through", "the", "list", "of", "arguments", "replacing", "new", "for", "old", "until", "we", ";;", "run", "out;", "then", "make", "sure", "the", "two", "are", "the", "same.", "(defun", "consistent-arg-replace", "(new-args", "new-body", "old-args", "old-body)", "(cond", "((null", "new-args)", "(if", "(null", "old-args)", "nil", "(equal", "new-body", "old-body)))", "((null", "old-args)", "nil)", "(t", "(consistent-arg-replace", "(cdr", "new-args)", "new-body", "(cdr", "old-args)", "(subst", "(car", "new-args)", "(car", "old-args)", "old-body)))))", ";;", "When", "we", "implicitly", "define", "some", "goal", "function", "using", ";;", "definv,", "we", "can't", "know"], "content_hash": "f05dda0ed5b12d576b19595d83094530"}