{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs222p-2017-fall-project1-description?version=9", "word_count": 3600, "words": ["cs222p-2017-fall-project1-description", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "wiki:", "cs222p-2017-fall-project1-description", "Context", "Navigation", "\u2190", "Previous", "Version", "View", "Latest", "Version", "Next", "Version", "\u2192", "Version", "9", "(modified", "by", "Chen", "Luo", ",", "8", "years", "ago", ")", "(", "diff", ")", "--", "CS222P", "Fall", "2017:", "Principles", "of", "Data", "Management", "-", "Project", "1", "Description", "Introduction", "In", "this", "project,", "you", "will", "implement", "a", "paged", "file", "(PF)", "system", "and", "the", "first", "few", "operations", "of", "a", "record-based", "file", "(RBF)", "manager.", "The", "PF", "component", "provides", "facilities", "for", "higher-level", "client", "components", "to", "perform", "file", "I/O", "in", "terms", "of", "pages.", "In", "the", "PF", "component,", "methods", "are", "provided", "to", "create,", "destroy,", "open,", "and", "close", "paged", "files,", "to", "read", "and", "write", "a", "specific", "page", "of", "a", "given", "file,", "and", "to", "add", "pages", "to", "a", "given", "file.", "The", "record", "manager", "is", "going", "to", "be", "built", "on", "top", "of", "the", "basic", "paged", "file", "system.", "In", "this", "part", "of", "the", "project,", "you", "are", "also", "required", "to", "implement", "some", "(not", "all)", "of", "the", "methods", "provided", "in", "the", "record", "manager", "code", "skeleton.", "All", "methods", "in", "the", "PF", "and", "RBF", "components,", "except", "constructors", "and", "destructors,", "return", "integer", "codes.", "A", "return", "code", "of", "0", "indicates", "normal", "completion.", "A", "nonzero", "return", "code", "indicates", "that", "either", "an", "exception", "condition", "or", "an", "error", "has", "occurred.", "Interface", "The", "interface", "of", "part", "1", "of", "the", "project", "consists", "of", "three", "classes:", "the", "PagedFileManager,", "the", "FileHandle,", "and", "the", "RecordBasedFileManager", "classes.", "PagedFileManager", "Class", "The", "PagedFileManager", "class", "handles", "the", "creation,", "deletion,", "opening,", "and", "closing", "of", "paged", "files.", "Your", "program", "should", "create", "exactly", "one", "instance", "of", "this", "class,", "and", "all", "requests", "for", "PF", "component", "file", "management", "should", "be", "directed", "to", "that", "instance.", "Below,", "the", "public", "methods", "of", "the", "class", "declaration", "are", "shown", "first,", "followed", "by", "descriptions", "of", "the", "methods.", "The", "first", "two", "methods", "in", "the", "class", "declaration", "are", "the", "constructor", "and", "destructor", "methods", "for", "the", "class;", "they", "are", "not", "explained", "further.", "Each", "method", "except", "the", "constructor", "and", "destructor", "methods", "returns", "a", "value", "of", "type", "RC", "(for", "\"return", "code\"", "--", "actually", "an", "integer).", "A", "return", "code", "of", "0", "indicates", "normal", "completion.", "A", "nonzero", "return", "code", "indicates", "that", "an", "exception", "condition", "or", "error", "has", "occurred.", "class", "PagedFileManager", "{", "public", ":", "//", "Access", "to", "the", "_pf_manager", "instance", "static", "PagedFileManager", "*", "instance", "();", "//", "Create", "a", "new", "file", "RC", "createFile", "(", "const", "string", "&", "fileName", ");", "//", "Destroy", "a", "file", "RC", "destroyFile", "(", "const", "string", "&", "fileName", ");", "//", "Open", "a", "file", "RC", "openFile", "(", "const", "string", "&", "fileName", ",", "FileHandle", "&", "fileHandle", ");", "//", "Close", "a", "file", "RC", "closeFile", "(", "FileHandle", "&", "fileHandle", ");", "protected", ":", "//", "Constructor", "PagedFileManager", "();", "//", "Destructor", "~", "PagedFileManager", "();", "private", ":", "static", "PagedFileManager", "*", "_pf_manager", ";", "}", "RC", "createFile", "(const", "string", "&fileName)", "This", "method", "creates", "an", "empty-paged", "file", "called", "fileName.", "The", "file", "should", "not", "already", "exist.", "This", "method", "should", "not", "create", "any", "pages", "in", "the", "file.", "RC", "destroyFile", "(const", "string", "&fileName)", "This", "method", "destroys", "the", "paged", "file", "whose", "name", "is", "fileName.", "The", "file", "should", "already", "exist.", "RC", "openFile", "(const", "string", "&fileName,", "FileHandle", "&fileHandle)", "This", "method", "opens", "the", "paged", "file", "whose", "name", "is", "fileName.", "The", "file", "must", "already", "exist", "(and", "been", "created", "using", "the", "createFile", "method).", "If", "the", "open", "method", "is", "successful,", "the", "fileHandle", "object", "whose", "address", "is", "passed", "in", "as", "a", "parameter", "now", "becomes", "a", "\"handle\"", "for", "the", "open", "file.", "This", "file", "handle", "is", "used", "to", "manipulate", "the", "pages", "of", "the", "file", "(see", "the", "FileHandle", "class", "description", "below).", "It", "is", "an", "error", "if", "fileHandle", "is", "already", "a", "handle", "for", "some", "open", "file", "when", "it", "is", "passed", "to", "the", "openFile", "method.", "It", "is", "not", "an", "error", "to", "open", "the", "same", "file", "more", "than", "once", "if", "desired,", "but", "this", "would", "be", "done", "by", "using", "a", "different", "fileHandle", "object", "each", "time.", "Each", "call", "to", "the", "openFile", "method", "creates", "a", "new", "\"instance\"", "of", "the", "open", "file.", "Warning:", "Opening", "a", "file", "more", "than", "once", "for", "data", "modification", "is", "not", "prevented", "by", "the", "PF", "component,", "but", "doing", "so", "is", "likely", "to", "corrupt", "the", "file", "structure", "and", "may", "crash", "the", "PF", "component.", "(You", "do", "not", "need", "to", "try", "and", "prevent", "this,", "as", "you", "can", "assume", "the", "layer", "above", "is", "\"friendly\"", "in", "that", "regard.)", "Opening", "a", "file", "more", "than", "once", "for", "reading", "is", "no", "problem.", "RC", "closeFile", "(FileHandle", "&fileHandle)", "This", "method", "closes", "the", "open", "file", "instance", "referred", "to", "by", "fileHandle.", "(The", "file", "should", "have", "been", "opened", "using", "the", "openFile", "method.)", "All", "of", "the", "file's", "pages", "are", "flushed", "to", "disk", "when", "the", "file", "is", "closed.", "FileHandle", "Class", "The", "FileHandle", "class", "provides", "access", "to", "the", "pages", "of", "an", "open", "file.", "To", "access", "the", "pages", "of", "a", "file,", "a", "client", "first", "creates", "an", "instance", "of", "this", "class", "and", "passes", "it", "to", "the", "PagedFileManager::openFile", "method", "described", "above.", "As", "before,", "the", "public", "methods", "of", "the", "class", "declaration", "are", "shown", "first,", "followed", "by", "descriptions", "of", "the", "methods.", "The", "first", "two", "methods", "in", "the", "class", "declaration", "are", "the", "constructor", "and", "destructor", "methods", "and", "are", "not", "explained", "further.", "In", "order", "for", "you", "to", "gather", "performance", "data", "about", "file", "accesses,", "the", "FileHandle", "class", "should", "maintain", "counters", "for", "each", "of", "the", "I/O-related", "operations", "of", "the", "FileHandle", "class.", "The", "counter", "values", "binds", "to", "a", "file,", "and", "they", "need", "to", "be", "persistent", "between", "multiple", "file", "open", "and", "close", "operations", "of", "the", "PagedFileManager", ".", "You", "need", "to", "store", "the", "counter", "values", "physically", "in", "a", "file,", "and", "you", "can", "decide", "how", "to", "implement", "it.", "For", "example,", "you", "can", "reserve", "the", "file's", "first", "page", "as", "a", "hidden", "page", "to", "store", "the", "counter", "values", "as", "well", "as", "the", "number", "of", "pages.", "In", "the", "constructor", "of", "the", "FileHandle,", "all", "counters", "are", "set", "to", "0", "just", "for", "the", "caller", "to", "construct", "the", "object.", "When", "PagedFileManager's", "openFile", "method", "binds", "the", "fileHandle", "to", "a", "specific", "file,", "you", "should", "read", "the", "file's", "previous", "counter", "values", "into", "the", "FileHandle.", "Inside", "each", "method", "of", "FileHandle,", "you", "will", "then", "need", "to", "increase", "the", "corresponding", "counter", "by", "1", "every", "time", "you", "successfully", "execute", "the", "associated", "method.", "For", "instance,", "when", "readPage()", "is", "executed,", "readPageCounter", "should", "be", "increased", "by", "1.", "class", "FileHandle", "{", "public:", "//", "variables", "to", "keep", "counter", "for", "each", "operation", "unsigned", "readPageCounter;", "unsigned", "writePageCounter;", "unsigned", "appendPageCounter;", "//", "Constructor", "FileHandle();", "//", "Destructor", "~FileHandle();", "//", "Get", "a", "specific", "page", "RC", "readPage(PageNum", "pageNum,", "void", "*data);"], "content_hash": "255057a2d36d9fae7a47646f6f1fc2b5"}