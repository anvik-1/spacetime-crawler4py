{"url": "http://www.ics.uci.edu/~kay/courses/i42/wildride/simulator.py", "word_count": 5378, "words": ["__author__", "=", "'Joel", "Ross;", "originally", "by", "Ping", "Chen,", "David", "G.", "Kay,", "Gabriela", "Marcu,", "Alex", "Thornton'", "###", "Informatics", "42,", "Amusement", "Park", "Simulator", "###", "Original", "version", "by", "Ping", "Chen,", "David", "G.", "Kay,", "Gabriela", "Marcu,", "Alex", "Thornton", "from", "datetime", "import", "datetime,", "date,", "time,", "timedelta", "#for", "time", "keeping", "import", "math", "##########################", "#####", "AMUSEMENT", "PARK", "#####", "##########################", "class", "AmusementPark():", "\"\"\"", "A", "class", "that", "handles", "the", "set", "of", "rides", "and", "customers,", "moving", "them", "around", "and", "ticking", "them", "as", "needed", "Acts", "as", "a", "container", "for", "rides", "and", "active", "customers", "Attributes:", "name", "(string", "naming", "the", "park)", "attractions", "(dictionary", "of", "Attraction,", "with", "the", "names", "as", "keys", "(to", "enable", "lookup))", "entrance", "(2-item", "tuple", "(x,y))", "exit", "(2-item", "tuple", "(x,y))", "openTime", "(time,", "when", "the", "park", "opens)", "closeTime", "(time,", "when", "the", "park", "closes)", "isOpen", "(boolean,", "whether", "the", "park", "is", "open", "or", "not)", "customers", "(list,", "the", "customers", "who", "are", "inside", "the", "park)", "\"\"\"", "def", "__init__(self,", "name:", "str,", "attractions:", "list,", "entrance:", "tuple,", "exit:tuple,", "openTime:", "time,", "closeTime:", "time):", "\"\"\"Initialize", "the", "park", "with", "a", "set", "of", "attractions", "and", "other", "parameters\"\"\"", "self.name", "=", "name", "self.attractions", "=", "dict((ride.name,", "ride)", "for", "ride", "in", "attractions)", "self.entrance", "=", "entrance", "self.exit", "=", "exit", "self.openTime", "=", "openTime", "self.closeTime", "=", "closeTime", "self.isOpen", "=", "False", "self.customers", "=", "[]", "def", "open(self):", "\"\"\"opens", "the", "park\"\"\"", "self.isOpen", "=", "True", "#", "open", "all", "the", "rides", "??", "def", "close(self):", "\"\"\"closes", "the", "park\"\"\"", "self.isOpen", "=", "False", "#", "close", "all", "the", "rides", "??", "def", "admitCustomer(self,customer:'Customer'):", "\"\"\"admits", "a", "customer", "to", "the", "park\"\"\"", "customer.enterPark(self)", "#tell", "the", "customer", "they", "have", "entered", "self.customers.append(customer)", "def", "deadmitCustomer(self,customer:'Customer'):", "\"\"\"removes", "a", "customer", "from", "the", "park\"\"\"", "customer.exitPark()", "self.customers.remove(customer)", "def", "tick(self):", "\"\"\"does", "a", "clock", "tick\"\"\"", "toRemove", "=", "[]", "#", "a", "list", "to", "hold", "people", "we", "want", "to", "deadmit", "for", "customer", "in", "self.customers:", "customer.tick()", "if", "customer.status", "==", "Customer.ARRIVED:", "self.attractions[customer.nextRide()].enqueue(customer)", "if", "customer.status", "==", "Customer.LEFT:", "toRemove.append(customer)", "for", "customer", "in", "toRemove:", "self.deadmitCustomer(customer)", "for", "ride", "in", "self.attractions.values():", "ride.tick()", "def", "getClosestRides(self,", "location:list,", "count:int):", "\"\"\"Gets", "the", "names", "of", "the", "closest", "rides", "to", ".\"\"\"", "return", "sorted(self.attractions.values(),", "key=lambda", "ride:dist(ride.entrance,", "location))[0:count]", "def", "getRideNames(self):", "\"\"\"Returns", "a", "list", "of", "the", "names", "of", "rides", "we", "have.", "Useful.\"\"\"", "return", "list(self.attractions.keys())", "class", "Clock():", "\"\"\"", "A", "simple", "wrapper", "for", "datetime", "that", "lets", "us", "pass", "around", "a", "reference", "for", "everyone", "to", "refer", "to.", "Also", "makes", "ticking", "cleaner.", "Attributes:", "clock", "(a", "datetime", "we", "use", "to", "keep", "track", "of", "things)", "initDate", "(the", "date", "we", "initialize", "on,", "to", "enable", "resetting)", "initTime", "(the", "time", "we", "initialize", "on,", "to", "enable", "resetting)", "\"\"\"", "def", "__init__(self,", "day:date", "=", "date.today(),", "time:time", "=", "time(0,0)):", "\"\"\"Initializes", "the", "clock.", "Takes", "a", "starting", "date", "and", "time", "parameter", "(which", "default", "to", "TODAY", "and", "time(0,0))\"\"\"", "self.clock", "=", "datetime.combine(day,time)", "self.initDate", "=", "date", "self.initTime", "=", "time", "def", "__str__(self):", "\"\"\"Returns", "a", "string", "of", "the", "time.\"\"\"", "return", "self.clock.time().strftime(\"%H:%M\")", "def", "__repr__(self):", "\"\"\"Returns", "a", "string", "of", "the", "time.\"\"\"", "return", "self.clock.time().strftime(\"%H:%M\")", "def", "time(self):", "\"\"\"gets", "the", "time", "from", "the", "clock", "(for", "comparisons/measuring)\"\"\"", "return", "self.clock.time()", "def", "reset(self):", "self.clock", "=", "datetime.combine(self.initDate,self.initTime)", "def", "tick(self):", "\"\"\"increments", "the", "clock", "by", "1", "minute\"\"\"", "self.clock", "+=", "timedelta(minutes=1)", "#######################", "#####", "ATTRACTIONS", "#####", "#######################", "class", "Attraction():", "\"\"\"", "A", "base", "class", "for", "attractions.", "Handles", "most", "of", "the", "work", "of", "moving", "customers", "through", "lines", "and", "through", "the", "ride", "Attributes:", "name", "(string", "name", "of", "the", "ride)", "entrance", "(2-item", "tuple", "(x,y))", "exit", "(2-item", "tuple", "(x,y))", "numCars", "(int", "current", "number", "of", "cars)", "maxCars", "(int", "maximum", "number", "of", "cars)", "carCapacity", "(int)", "rideCars", "(list", "of", "RideCar", "objects,", "which", "hold", "their", "own", "status", "and", "customers)", "waitQueue", "(list", "of", "Customers,", "the", "queue", "of", "people", "waiting)", "isOpen", "(boolean,", "telling", "if", "the", "ride", "is", "open)", "emptyCarCounter", "(int,", "a", "counter", "to", "keep", "track", "of", "how", "many", "empty", "cars", "we've", "had.", "Helps", "determine", "when", "to", "add/remove", "cars)", "stats", "(dictionary,", "stores", "values", "used", "to", "calculate", "statistics)", "\"\"\"", "def", "__init__(self,", "name:", "str,", "entrance:", "tuple,", "exit:", "tuple,", "carStats:", "tuple,", "rideTime:", "int,", "loadTime:", "int):", "\"\"\"Initialize", "the", "attraction", "with", "the", "given", "parameters.\"\"\"", "self.name", "=", "name", "self.entrance", "=", "entrance", "self.exit", "=", "exit", "self.numCars,", "self.maxCars,", "self.carCapacity", "=", "carStats", "self.rideTime", "=", "rideTime", "self.loadTime", "=", "loadTime", "self.rideCars", "=", "[RideCar(self.carCapacity,self.loadTime,self.rideTime)", "for", "i", "in", "range(self.numCars)]", "self.waitQueue", "=", "[]", "self.isOpen", "=", "True", "self.emptyCarCounter", "=", "0", "self.stats", "=", "{'timeRunning':0,'totalRiders':0,'riderMinutes':0,'carMinutes':0,", "'minCars':len(self.rideCars),'maxCars':len(self.rideCars),", "'lineMinutes':0,", "'minLine':float('inf'),'maxLine':0,", "'totalWaiters':0,", "'minWait':0,", "'maxWait':0}", "def", "__str__(self):", "\"\"\"String", "representation.", "For", "debugging\"\"\"", "return", "\"%s(%s,", "%s)\"", "%", "(self.__class__.__name__,", "self.name,", "self.waitQueue)", "def", "__repr__(self):", "\"\"\"String", "representation", "as", "used", "by", "lists", "and", "dictionaries.", "For", "debugging\"\"\"", "return", "\"%s(%s)\"", "%", "(self.__class__.__name__,", "self.name)", "def", "addCar(self):", "\"\"\"adds", "a", "new", "car", "to", "the", "ride\"\"\"", "self.rideCars.append(RideCar(self.carCapacity,self.loadTime,self.rideTime))", "def", "removeCar(self):", "\"\"\"removes", "the", "first", "empty", "car\"\"\"", "for", "car", "in", "self.rideCars:", "if", "car.status", "==", "RideCar.WAITING", "and", "car.isEmpty():", "self.rideCars.remove(car)", "break", "def", "enqueue(self,", "customer:'Customer'):", "\"\"\"add", "the", "customer", "to", "the", "line,", "returns", "a", "boolean", "if", "successfully", "added", "or", "not\"\"\"", "#", "java", "version", "has", "some", "extra", "checks,", "like", "maximum", "line", "lengths,", "which", "we're", "not", "dealing", "with", "success", "=", "False", "if", "self.isOpen:", "self.waitQueue.append(customer)", "customer.enterAttraction(self)", "#notifies", "the", "customer", "that", "they're", "now", "in", "line", "success", "=", "True", "return", "success", "def", "dequeue(self):", "\"\"\"get", "customers", "out", "of", "line", "(to", "be", "put", "into", "cars).", "Returns", "a", "list", "of", "customers", "removed", "from", "the", "line\"\"\"", "dequeued", "=", "self.waitQueue[0:self.carCapacity]", "self.waitQueue", "=", "self.waitQueue[self.carCapacity:]", "return", "dequeued", "def", "unloadCars(self):", "\"\"\"goes", "through", "the", "cars", "and", "unloads", "any", "that", "are", "finished\"\"\"", "for", "car", "in", "self.rideCars:", "if", "car.status", "==", "RideCar.DONE:", "unloaded", "=", "car.unloadCustomers()", "for", "customer", "in", "unloaded:", "customer.exitAttraction(self)", "#print(\"unloaded\",unloaded,\"from", "Car\",self.rideCars.index(car))", "def", "loadCars(self):", "\"\"\"goes", "through", "the", "cars", "and", "loads", "any", "that", "are", "waiting", "for", "people\"\"\"", "for", "car", "in", "self.rideCars:", "if", "car.status", "==", "RideCar.WAITING:", "toload", "=", "self.dequeue()", "if", "len(toload)", ">", "0:", "#if", "we", "have", "people", "to", "load", "car.loadCustomers(toload)", "#print(\"loaded\",toload,\"into", "Car\",self.rideCars.index(car))", "#don't", "update", "customers,", "since", "loading", "is", "considered", "still", "being", "in", "line", "def", "tick(self):", "raise", "NotImplementedError(\"Attraction", "class", "must", "be", "subclassed", "to", "be", "tickable\")", "def", "estimatedWait(self):", "raise", "NotImplementedError(\"Attraction", "class", "must", "be", "subclassed", "to", "report", "estimated", "wait\")", "def", "updateStats(self):", "\"\"\"Updates", "the", "statistics", "variable", "based", "on", "the", "current", "state", "of", "the", "attraction", "this", "minute.", "DO", "NOT", "CALL", "MORE", "THAN", "ONCE", "PER", "ROUND.", "\"\"\"", "self.stats['timeRunning']", "+=", "1", "numRidersLoaded", "=", "0", "numPeopleRiding", "=", "0", "for", "car", "in", "self.rideCars:", "#iterate", "through", "the", "cars", "numRidersLoaded", "+=", "car.justLaunched()", "numPeopleRiding", "+=", "car.numRiders()", "self.stats['totalRiders']", "+=", "numRidersLoaded", "self.stats['riderMinutes']", "+=", "numPeopleRiding", "self.stats['carMinutes']", "+=", "len(self.rideCars)", "self.stats['minCars']", "=", "min(self.stats['minCars'],len(self.rideCars))", "self.stats['maxCars']", "=", "max(self.stats['maxCars'],len(self.rideCars))", "self.stats['lineMinutes']", "+=", "len(self.waitQueue)", "self.stats['minLine']", "=", "min(self.stats['minLine'],len(self.waitQueue))", "self.stats['maxLine']", "=", "max(self.stats['maxLine'],len(self.waitQueue))", "newWaiters", "=", "0", "minWaitTime", "=", "float('inf')", "#infinity,", "so", "first", "thing", "will", "always", "be", "smaller", "maxWaitTime", "=", "0", "for", "customer", "in", "self.waitQueue:", "#iterate", "through", "the", "customers", "in", "line", "newWaiters", "+=", "customer.isNewWaiter()", "#slightly", "awkward", "method,", "but", "lets", "us", "put", "stats", "all", "in", "1", "place", "waitTime", "=", "customer.timeWaiting()", "minWaitTime", "="], "content_hash": "b3276b73bc0bf3dd42df06251f7a0ad6"}