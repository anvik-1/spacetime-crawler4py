{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project2?action=diff&version=4", "word_count": 2750, "words": ["cs221-2019-spring-project2", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Version", "3", "and", "Version", "4", "of", "cs221-2019-spring-project2", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Apr", "18,", "2019,", "12:35:15", "PM", "(", "7", "years", "ago)", "Author:", "Zuozhi", "Wang", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs221-2019-spring-project2", "v3", "v4", "5", "5", "'''Final", "Code", "Due:", "Week", "5,", "Sun.", "(May.", "5),", "Due", "on", "Github.'''[[BR]]", "6", "6", "7", "=", "Overview", "=", "8", "7", "9", "8", "==", "Coding", "Tasks", "==", "\u2026", "\u2026", "20", "19", "Total:", "19", "points", "(+", "4", "extra", "credits)", "21", "20", "21", "==", "Overview", "==", "22", "22", "23", "In", "this", "project,", "you'll", "be", "implementing", "a", "disk-based", "inverted", "index", "and", "the", "search", "operations.", "23", "24", "24", "On", "a", "high", "level,", "inverted", "index", "stores", "the", "mapping", "from", "keywords", "to", "the", "documents", "they", "appear", "in.", "25", "A", "simple", "in-memory", "structure", "could", "be", "`Map<String,", "List<Integer>>`,", "where", "each", "key", "is", "a", "keyword", "token", "(also", "called", "term),", "26", "and", "each", "value", "is", "a", "list", "of", "(often", "sorted)", "document", "IDs", "(also", "called", "postings).", "27", "28", "In", "this", "project,", "the", "disk-based", "index", "structure", "is", "similar", "to", "the", "idea", "of", "LSM", "(Log-Structured", "Merge", "tree).", "29", "A", "general", "idea", "will", "be", "described.", "The", "details", "should", "follow", "what", "Professor", "says", "in", "the", "lecture.", "30", "31", "The", "inverted", "index", "consists", "of", "multiple", "index", "segments,", "where", "each", "segment", "is", "only", "created", "and", "then", "appended.", "32", "Once", "each", "segment", "is", "written", "to", "disk,", "it", "becomes", "immutable", "and", "is", "never", "changed", "again.", "33", "34", "Each", "index", "segment", "is", "a", "fully", "searchable", "inverted", "index,", "35", "it", "contains", "the", "inverted", "index", "structure", "as", "well", "the", "document", "store", "(map", "from", "documentID", "to", "actual", "document),", "36", "the", "document", "ID", "of", "each", "segment", "is", "local", "to", "the", "segment", "itself", "and", "it", "is", "invisible", "to", "the", "user.", "37", "38", "When", "searching", "a", "keyword,", "all", "segments", "are", "searched,", "and", "the", "result", "documents", "from", "each", "segment", "are", "combined.", "25", "At", "a", "high", "level,", "inverted", "index", "stores", "a", "mapping", "from", "keywords", "to", "the", "ids", "of", "documents", "they", "appear", "in.", "26", "A", "simple", "in-memory", "structure", "could", "be", "`Map<String,", "List<Integer>>`,", "where", "each", "key", "is", "a", "keyword", "token", "(also", "called", "a", "\"term\"),", "27", "and", "each", "value", "is", "a", "list", "of", "(often", "sorted)", "document", "IDs", "(also", "called", "\"postings\").", "28", "29", "In", "this", "project,", "the", "disk-based", "index", "structure", "is", "based", "on", "the", "idea", "of", "LSM", "(Log-Structured", "Merge", "tree).", "30", "Its", "main", "idea", "is", "the", "following:", "31", "32", "The", "inverted", "index", "consists", "of", "multiple", "index", "segments,", "where", "each", "segment", "is", "initially", "created", "in", "memory.", "33", "Once", "a", "segment", "is", "written", "to", "disk,", "it", "becomes", "immutable", "and", "is", "never", "changed.", "34", "35", "Each", "index", "segment", "is", "a", "fully", "searchable", "inverted", "index.", "36", "It", "contains", "a", "posting", "list", "structure", "as", "well", "as", "a", "document", "store,", "which", "is", "a", "mapping", "from", "a", "docID", "to", "the", "corresponding", "document.", "37", "The", "document", "IDs", "within", "each", "segment", "are", "local", "in", "the", "segment", "and", "are", "invisible", "to", "the", "user.", "38", "These", "in-disk", "segments", "are", "periodically", "merged", "to", "bigger", "segments.", "39", "40", "When", "users", "search", "a", "keyword,", "all", "segments", "are", "searched,", "and", "the", "result", "documents", "from", "each", "segment", "are", "combined.", "39", "41", "40", "42", "Example:", "41", "43", "42", "{{{", "43", "Add", "documents", "\"cat", "dog\"", "and", "\"cat", "elephant\",", "then", "flush", "to", "write", "Segment0.", "44", "45", "{{{", "46", "Add", "documents", "Doc{\"cat", "dog\"}", "and", "Doc{\"cat", "elephant\"},", "then", "flush", "to", "Segment0.", "44", "47", "Segment0:", "45", "48", "----------", "46", "InvertIndex", ":", "{\"cat\":", "[0,", "1],", "\"dog\":", "[0],", "\"elephant\":", "[1]}", "49", "PostingList", ":", "{\"cat\":", "[0,", "1],", "\"dog\":", "[0],", "\"elephant\":", "[1]}", "47", "50", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"cat", "elephant\"}", "48", "51", "----------", "49", "52", "50", "Then", "add", "documents", "\"cat", "dog\"", "and", "\"wolf", "dog\",", "and", "flush", "to", "write", "a", "new", "Segment,", "Segment1.", "53", "Then", "add", "documents", "Doc{\"cat", "dog\"}", "and", "Doc{\"wolf", "dog\"},", "and", "flush", "to", "Segment1.", "51", "54", "Segment1:", "52", "55", "----------", "53", "InvertIndex", ":", "{\"cat\":", "[0],", "\"dog\":", "[0,", "1],", "\"wolf\":", "[1]}", "56", "PostingList", ":", "{\"cat\":", "[0],", "\"dog\":", "[0,", "1],", "\"wolf\":", "[1]}", "54", "57", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"wolf", "dog\"}", "55", "58", "----------", "56", "}}}", "57", "58", "59", "When", "searching", "the", "word", "\"cat\",", "first", "search", "Segment0", "and", "get", "[\"cat", "dog\",", "\"cat", "elephant\"],", "60", "then", "search", "Segment1", "and", "get", "[\"cat", "dog\"],", "then", "combine", "results", "to", "get", "[\"cat", "dog\",", "\"cat", "elephant\",", "\"cat", "dog\"]", "61", "62", "63", "=", "Coding", "Tasks", "=", "64", "65", "==", "Task", "1:", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "==", "66", "67", "In", "this", "task,", "you'll", "implement", "the", "disk", "file", "structure", "of", "an", "inverted", "index", "segment.", "68", "When", "a", "document", "is", "added", "via", "`addDocument()`,", "it", "should", "be", "first", "stored", "in", "the", "in-memory", "buffer.", "69", "Whenever", "the", "number", "of", "documents", "reached", "default_flush_threshold,", "or", "function", "`flush()`", "is", "called,", "70", "you", "should", "create", "a", "new", "inverted", "index", "segment", "with", "the", "documents", "in", "the", "buffer.", "71", "72", "The", "specific", "format", "of", "the", "inverted", "lists", "should", "in", "general", "follow", "what", "Professor", "says", "in", "lecture.", "73", "You", "also", "have", "freedom", "to", "design", "the", "format", "to", "make", "it", "more", "efficient", "to", "store", "or", "search.", "74", "In", "principle,", "the", "terms", "can", "be", "loaded", "into", "memory,", "but", "all", "the", "posting", "lists", "cannot", "be", "entirely", "loaded", "into", "memory.", "75", "76", "Your", "implementation", "should", "be", "in", "the", "`InvertedIndexManger`", "class.", "77", "78", "{{{", "79", "private", "InvertedIndexManager(String", "indexFolder,", "Analyzer", "analyzer)", "{", "80", "}", "81", "82", "/**", "83", "*", "Creates", "an", "inverted", "index", "manager", "with", "the", "folder", "and", "an", "analyzer", "84", "*/", "85", "public", "static", "InvertedIndexManager", "createOrOpen(String", "indexFolder,", "Analyzer", "analyzer)", "{", "86", "}", "87", "}}}", "88", "89", "90", "Functions", "to", "implement:", "91", "92", "{{{", "93", "/**", "94", "*", "Adds", "a", "document", "to", "the", "inverted", "index.", "95", "*", "Document", "should", "live", "in", "a", "in-memory", "buffer", "until", "`flush()`", "is", "called", "to", "write", "them", "to", "disk.", "96", "*", "@param", "document", "97", "*/", "98", "public", "void", "addDocument(Document", "document);", "99", "100", "/**", "101", "*", "Flushes", "all", "the", "documents", "in", "the", "buffer", "to", "disk.", "If", "the", "buffer", "is", "empty,", "it", "should", "not", "do", "anything.", "102", "*", "flush()", "creates", "a", "new", "index", "segment", "containing", "the", "inverted", "index", "and", "the", "corresponding", "document", "store.", "103", "*/", "104", "public", "void", "flush();", "105", "106"], "content_hash": "4a71377927b8aea18fe8f753df7778df"}