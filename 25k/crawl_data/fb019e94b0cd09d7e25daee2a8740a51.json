{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2017-winter-project5-mysql-master-slave?action=diff&version=2", "word_count": 1182, "words": ["cs122b-2017-winter-project5-mysql-master-slave", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Version", "1", "and", "Version", "2", "of", "cs122b-2017-winter-project5-mysql-master-slave", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Mar", "2,", "2017,", "11:47:52", "PM", "(", "9", "years", "ago)", "Author:", "Chen", "Luo", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs122b-2017-winter-project5-mysql-master-slave", "v1", "v2", "1", "2", "1", "===", "MySQL", "Master-Slave", "Replication", "===", "3", "4", "2", "This", "tutorial", "shows", "how", "to", "setup", "a", "MySQL", "cluster", "on", "AWS", "that", "includes", "a", "master", "and", "a", "slave.", "Reads", "can", "be", "sent", "to", "any", "of", "the", "two", "instances,", "and", "writes", "have", "to", "be", "sent", "to", "the", "master", "instance.", "5", "3", "6", "1.", "Setup", "two", "new", "AWS", "instances:", "7", "i.", "Create", "two", "new", "AWS", "instances", "identical", "to", "your", "previous", "instance", "used", "to", "run", "Fabflix.", "We", "call", "these", "\"instance", "2\"", "(as", "the", "master)", "and", "\"instance", "3\"'", "(as", "the", "slave).", "We", "assume", "their", "public", "IPs", "are", "2.2.2.2", "and", "3.3.3.3,", "and", "their", "internal", "AWS", "IPs", "are", "172.2.2.2", "and", "172.3.3.3,", "respectively.", "8", "i.", "Add", "new", "rules", "in", "their", "security", "group(s)", "to", "open", "their", "`MYSQL/Aurora`", "type", "to", "each", "other", "using", "their", "AWS", "internal", "IP.", "9", "1.", "Watch", "[https://www.youtube.com/watch?v=JXDuVypcHNA", "this", "video]", "to", "have", "a", "good", "understanding", "of", "this", "feature.", "The", "following", "steps", "are", "mainly", "based", "on", "those", "instructions", "in", "the", "video.", "10", "1.", "Set", "up", "the", "master", "instance.", "11", "i.", "SSH", "to", "the", "master", "instance.", "Run", "the", "following", "command", "to", "install", "MySQL", "server.", "4", "1.", "Setup", "two", "new", "AWS", "instances:", "5", "i.", "Create", "two", "new", "AWS", "instances", "identical", "to", "your", "previous", "instance", "used", "to", "run", "Fabflix.", "We", "call", "these", "\"instance", "2\"", "(as", "the", "master)", "and", "\"instance", "3\"'", "(as", "the", "slave).", "We", "assume", "their", "public", "IPs", "are", "2.2.2.2", "and", "3.3.3.3,", "and", "their", "internal", "AWS", "IPs", "are", "172.2.2.2", "and", "172.3.3.3,", "respectively.", "6", "i.", "Add", "new", "rules", "in", "their", "security", "group(s)", "to", "open", "their", "`MYSQL/Aurora`", "type", "to", "each", "other", "using", "their", "AWS", "internal", "IP.", "7", "1.", "Watch", "[https://www.youtube.com/watch?v=JXDuVypcHNA", "this", "video]", "to", "have", "a", "good", "understanding", "of", "this", "feature.", "The", "following", "steps", "are", "mainly", "based", "on", "those", "instructions", "in", "the", "video.", "8", "1.", "Set", "up", "the", "master", "instance.", "9", "i.", "SSH", "to", "the", "master", "instance.", "Run", "the", "following", "command", "to", "install", "MySQL", "server.", "12", "10", "{{{", "13", "11", "master-shell>", "sudo", "apt-get", "update", "\u2026", "\u2026", "15", "13", "}}}", "16", "14", "i.", "Edit", "the", "`/etc/mysql/my.cnf`", "file", "and", "set", "the", "`bind-address`", "to", "'''0.0.0.0'''.", "Also,", "uncomment", "the", "lines", "of", "`server-id`", "and", "`log_bin`", "properties.", "17", "i.", "Restart", "the", "MySQL", "service.", "15", "i.", "Restart", "the", "MySQL", "service.", "18", "16", "{{{", "19", "17", "master-shell>", "sudo", "service", "mysql", "restart", "\u2026", "\u2026", "29", "27", "master-mysql>", "show", "master", "status;", "30", "28", "}}}", "31", "Keep", "the", "values", "of", "the", "`File`", "and", "`Position`", "columns,", "as", "they", "are", "needed", "in", "the", "next", "step.", "For", "example,", "these", "values", "are", "`mysql-bin.000001`", "and", "`337`.", "32", "1.", "Set", "up", "the", "slave", "instance:", "33", "i.", "SSH", "to", "the", "slave", "instance.", "Run", "the", "following", "commands", "to", "install", "MySQL", "server.", "29", "Keep", "the", "values", "of", "the", "`File`", "and", "`Position`", "columns,", "as", "they", "are", "needed", "in", "the", "next", "step.", "For", "example,", "these", "values", "are", "`mysql-bin.000001`", "and", "`337`.", "30", "1.", "Set", "up", "the", "slave", "instance:", "31", "i.", "SSH", "to", "the", "slave", "instance.", "Run", "the", "following", "commands", "to", "install", "MySQL", "server.", "34", "32", "{{{", "35", "33", "slave-shell>", "sudo", "apt-get", "update", "\u2026", "\u2026", "52", "50", "slave-mysql>", "show", "slave", "status\\G;", "53", "51", "}}}", "54", "It", "should", "show", "\"Slave_IO_State:", "Waiting", "for", "master", "to", "send", "event\".", "55", "1.", "Test", "if", "the", "synchronization", "works:", "56", "i.", "On", "the", "master", "instance,", "create", "a", "database", "with", "a", "table", "with", "a", "tuple:", "52", "It", "should", "show", "\"Slave_IO_State:", "Waiting", "for", "master", "to", "send", "event\".", "53", "1.", "Test", "if", "the", "synchronization", "works:", "54", "i.", "On", "the", "master", "instance,", "create", "a", "database", "with", "a", "table", "with", "a", "tuple:", "57", "55", "{{{", "58", "56", "master-shell>", "mysql", "-u", "root", "-p", "\u2026", "\u2026", "62", "60", "master-mysql>", "insert", "into", "pets", "values", "(\"fluffy\");", "63", "61", "}}}", "64", "i.", "On", "the", "slave", "instance,", "check", "if", "the", "data", "has", "been", "propagated", "from", "the", "master:", "62", "i.", "On", "the", "slave", "instance,", "check", "if", "the", "data", "has", "been", "propagated", "from", "the", "master:", "65", "63", "{{{", "66", "64", "slave-shell>", "mysql", "-u", "root", "-p", "\u2026", "\u2026", "70", "68", "slave-mysql>", "select", "*", "from", "pets;", "71", "69", "}}}", "72", "We", "should", "be", "able", "to", "see", "the", "database,", "table,", "and", "record", "on", "this", "instance", "propagated", "from", "the", "master.", "If", "so,", "congratulations!", "73", "1.", "Move", "data", "from", "the", "original", "instance", "used", "in", "project", "2", "(let's", "call", "it", "\"Instance", "1\"", ")", "to", "the", "master", "instance:", "74", "i.", "On", "instance", "1,", "dump", "the", "data", "of", "the", "\"moviedb\"", "database", "to", "a", "file:", "70", "We", "should", "be", "able", "to", "see", "the", "database,", "table,", "and", "record", "on", "this", "instance", "propagated", "from", "the", "master.", "If", "so,", "congratulations!", "71", "1.", "Move", "data", "from", "the", "original", "instance", "used", "in", "project", "2", "(let's", "call", "it", "\"Instance", "1\"", ")", "to", "the", "master", "instance:", "72", "i.", "On", "instance", "1,", "dump", "the", "data", "of", "the", "\"moviedb\"", "database", "to", "a", "file:", "75", "73", "{{{", "76", "instance1-shell>", "mysql", "dump", "-u", "root", "-p", "--databases", "moviedb", ">", "~/movie-dump.sql", "74", "instance1-shell>", "mysql", "-u", "root", "-p", "--databases", "moviedb", ">", "~/movie-dump.sql", "77", "75", "}}}", "78", "i.", "In", "the", "security", "group", "of", "the", "master", "instance,", "allow", "SSH", "access", "from", "the", "frontend", "instance", "to", "the", "master", "instance.", "79", "i.", "On", "instance", "1,", "copy", "the", "MySQL", "dump", "file", "to", "the", "master", "instance", "(you", "need", "to", "have", "the", "pem", "key", "available", "on", "instance", "1:", "76", "i.", "In", "the", "security", "group", "of", "the", "master", "instance,", "allow", "SSH", "access", "from", "the", "frontend", "instance", "to", "the", "master", "instance.", "77", "i.", "On", "instance", "1,", "copy", "the", "MySQL", "dump", "file", "to", "the", "master", "instance", "(you", "need", "to", "have", "the", "pem", "key", "available", "on", "instance", "1:", "80", "78", "{{{", "81", "79", "instance1-shell>", "scp", "-i", "\"mykey.pem\"", "~/movie-dump.sql", "ubuntu@[Master_Instance_private_IP]:~/", "82", "80", "}}}", "83", "i.", "On", "the", "master", "instance,", "create", "a", "database", "\"moviedb\".", "Then", "load", "the", "data", "from", "the", "dump", "file", "into", "its", "own", "MySQL,", "and", "check", "its", "status.", "81", "i.", "On", "the", "master", "instance,", "create", "a", "database", "\"moviedb\".", "Then", "load", "the", "data", "from", "the"], "content_hash": "f7cb0e89b94cffba141346b2299da750"}