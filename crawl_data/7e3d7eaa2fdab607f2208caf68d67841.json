{"url": "https://wiki.ics.uci.edu/doku.php/virtual_environments:singularity", "word_count": 2196, "words": ["Singularity", "@", "ICS", "[Support", "Wiki]", "Trace:", "\u2022", "Singularity", "@", "ICS", "Singularity", "@", "ICS", "Sidebar", "ICS", "Accounts", "Announcement", "and", "Maintenance", "Backups", "@", "ICS", "Common", "Tasks", "and", "Commands", "Group", "Files", "Hardware", "Support", "Instructional", "Support", "Resources", "Network", "os", "policies", "projects", "remote_support", "requesttracker", "Research", "Support", "security", "services", "Software", "Virtual", "Environments", "services", "Google", "Cloud", "Platform", "(GCP)", "jupyterhub", "Singularity", "@", "ICS", "ICS", "Web", "Applications", "wiki", "Table", "of", "Contents", "Singularity", "@", "ICS", "External", "Documentation", "Internal", "Documentation", "Why", "Singularity", "Special", "Circumstances", "Name", "Spaces", "Usage", "Module", "Shortcuts", "Running", "the", "Tensorflow", "Docker", "Container", "Running", "the", "Postgres", "Docker", "Container", "Ollama", "Gunicorn", "rocker/shiny", "Singularity", "Image", "Docker", "Conversions", "(examples)", "Tomcat", "Docker", "MySQL", "Docker", "PHP-Apache", "Docker", "Rebuilding", "PHP-Apache", "Docker", "with", "Additional", "Packages", "Shiny", "Server", "Building", "with", "Fake", "Root", "Jupyterlab/SciPy-Notebook", "INF124", "Spring", "2021", "Stopping", "Instances", "Other", "Examples", "Google", "Brain", "Using", "Slurm", "with", "and", "nVidia", "Drivers", "FAQ", "Related", "Troubleshooting", "Singularity", "@", "ICS", "External", "Documentation", "https://sylabs.io/guides/3.5/user-guide/introduction.html", "Quick", "Start", "Singularity", "and", "Docker", "GPU", "Support", "(NVIDIA", "CUDA", "&", "AMD", "ROCm)", "Singularity", "Definition", "Files", "Singularity", "Definition", "and", "Docker", "Build", "Files", "Internal", "Documentation", "Using", "cgroups", "Compilation", "Locally", "avaialble", "images", "/home/sources/SingularityImages", "/home/inf124/Spring2020/containers", "Why", "Singularity", "Security:", "a", "user", "in", "the", "container", "is", "the", "same", "user", "as", "the", "one", "running", "the", "container,", "so", "no", "privilege", "escalation", "possible.", "Ease", "of", "deployment:", "There", "is", "no", "daemon", "running", "on", "root,", "the", "container", "is", "simply", "executed.", "No", "need", "to", "mount", "filesystems", "or", "do", "bind", "mappings", "to", "access", "devices", "Special", "Circumstances", "Name", "Spaces", "Fakeroot", ":", "If", "you", "would", "like", "to", "use", "the", "fakeroot", "feature", "please", "send", "email", "to", "helpdesk@ics.uci.edu", "requesting", "that", "your", "username", "be", "added", "to", "the", "/etc/subuid", "and", "/etc/subgid", "files", "and", "given", "a", "65536", "uid/gid", "range.", "Furthermore,", "if", "the", "system", "is", "running", "CentOS7,", "the", "following", "option", "must", "be", "added", "to", "the", "kernel", "boot", "options:", "namespace.unpriv_enable=1", "Usage", "Module", "Use", "the", "ICS", "module", "command", "to", "add", "singularity", "to", "your", "path:", "module", "load", "singularity", "Use", "the", "following", "command", "to", "have", "singularity", "added", "to", "your", "environment", "every", "time", "you", "login:", "module", "initadd", "singularity", "Shortcuts", "Pulling", "the", "Laughing", "Cow", "Load", "the", "module.", "module", "load", "singularity", "Pull", "the", "image:", "singularity", "pull", "docker://godlovedc/lolcow", "Run", "the", "image;", "Pull", "the", "image:", "singularity", "run", "docker://godlovedc/lolcow", "Running", "the", "Tensorflow", "Docker", "Container", "We", "have", "been", "successful", "using", "the", "singularity", "program", "to", "run", "the", "Tensorflow", "Docker", "container", ".", "Use", "the", "following", "commands", "on", "an", "ICS", "hosts", "with", "working", "GPU's:", "module", "load", "singularity", "singularity", "pull", "docker://tensorflow/tensorflow", "singularity", "run", "--nv", "docker://tensorflow/tensorflow", "See", "Tensorflow", "for", "more", "infon", "on", "Tensorflow", "@", "ICS.", "Running", "the", "Postgres", "Docker", "Container", "Pull", "the", "docker", "image:", "singularity", "pull", "docker://postgres", "Run", "the", "docker", "image", "with", "your", "own", "database", "files", "(the", "postgresql", "offered", "to", "the", "-B", "switches", "must", "be", "created", "first).", "POSTGRES_PASSWORD=hansiskewl", "PGDATA=/var/lib/postgresql/data/pgdata", "singularity", "\\", "run", "--writable", "--no-home", "\\", "-B", "~/singularity/postgres/var/lib/postgresql/data:/var/lib/postgresql/data", "\\", "-B", "~/singularity/postgres/var/run/postgresql:/var/run/postgresql", "\\", "docker://postgres", "You", "can", "get", "a", "default", "postgreseql.conf", "file", "this", "way:", "singularity", "exec", "docker://postgres", "cat", "/usr/share/postgresql/postgresql.conf.sample", ">", "my-postgresql.conf", "The", "database", "will", "be", "available", "on", "localhost:5432", "by", "default.", "Please", "send", "mail", "to", "helpdesk@ics.uci.edu", "if", "you", "require", "ports", "opened", "for", "the", "server.", "Ollama", "Ollama", "Docker", "Container", "User", "contributed", "solution:", "singularity", "build", "ollama.sif", "docker://ollama/ollama", "mkdir", "-p", "$HOME/ollama_data_singularity", "singularity", "instance", "start", "--nv", "--bind", "$HOME/ollama_data_singularity:/root/.ollama", "--env", "OLLAMA_HOST=0.0.0.0:11434", "ollama.sif", "ollama_server", "singularity", "exec", "instance://ollama_server", "ollama", "serve", ">", "ollama.log", "2>&1", "&", "singularity", "exec", "instance://ollama_server", "ollama", "pull", "\"model\"", "The", "service", "is", "running", "on", "port", "11434", "of", "the", "server", "running", "singularity.", "In", "this", "case", "it", "was", "on", "biaslab0", "so", "the", "URL", "http://biaslab0.ics.uci.edu:11434", ".", "Gunicorn", "singularity", "build", "gunicorn.sif", "docker://tiangolo/meinheld-gunicorn-flask:python3.9-2025-09-29", "mkdir", "-p", "$HOME/gunicron_data_singularity", "singularity", "instance", "start", "--bind", "$HOME/gunicron_data_singularity:/root/.gunicron", "gunicorn.sif", "gunicorn_server", "rocker/shiny", "Singularity", "Image", "See", "Shiny", "Server", "Docker", "Conversions", "(examples)", "Tomcat", "Docker", "Tomcat", "Docker", "Page", "This", "is", "how", "the", "docker", "pages", "suggest", "running", "the", "tomcat:9.0", "container", "(you", "won't", "need", "to", "do", "this,", "we're", "just", "establishing", "a", "reference", "point).", "This", "runs", "the", "version", "9.0", "of", "the", "tomcat", "container", "and", "maps", "host", "machine", "port", "8888", "to", "container", "port", "8080.", "docker", "run", "-it", "--rm", "-p", "8888:8080", "tomcat:9.0", "Pull", "the", "docker", "images", "cd", "~/singularity", "singularity", "pull", "docker://tomcat", "singularity", "build", "--sandbox", "ics124-tomcat:simg", "docker://tomcat", "Create", "your", "own", "local", "dirs", "for", "webapps", ",", "and", "if", "you", "want", "to", "change", "any", "aspect", "of", "the", "configuration,", "conf", ".", "You", "are", "on", "your", "own", "to", "populate", "the", "webapps", "driectory,", "but", "you", "can", "capture", "the", "tomcat", "conf", "directory", "by", "running", "a", "shell", "on", "the", "systema", "nd", "using", "scp", "to", "copy", "the", "directory", "back", "intoy", "our", "ICS", "account:", "[5:16:58", "hans@circinus-2]singularity", "shell", "--no-home", "--writable", "ics124-tomcat:simg", "/home/hans/singularity", "Singularity", "ics124-tomcat:simg:/>", "scp", "-rp", "/usr/local/tomcat/conf", "openlab:/home/hans/ics124/conf", "Could", "not", "create", "directory", "'/home/hans/.ssh'.", "The", "authenticity", "of", "host", "'openlab", "(128.195.27.41)'", "can't", "be", "established.", "ECDSA", "key", "fingerprint", "is", "SHA256:jddej7MJbNgEm3o2IcDpg5KcVXi6Vk/KmiY4u+esPpc.", "Are", "you", "sure", "you", "want", "to", "continue", "connecting", "(yes/no)?", "yes", "Failed", "to", "add", "the", "host", "to", "the", "list", "of", "known", "hosts", "(/home/hans/.ssh/known_hosts).", "hans@openlab's", "password:", "catalina.policy", "100%", "13KB", "4.5MB/s", "00:00", "catalina.properties", "100%", "7661", "3.8MB/s", "00:00", "context.xml", "100%", "1338", "731.1KB/s", "00:00", "jaspic-providers.xml", "100%", "1149", "643.5KB/s", "00:00", "jaspic-providers.xsd", "100%", "2313", "1.1MB/s", "00:00", "logging.properties", "100%", "3916", "2.0MB/s", "00:00", "server.xml", "100%", "7588", "3.6MB/s", "00:00", "tomcat-users.xml", "100%", "2164", "1.4MB/s", "00:00", "tomcat-users.xsd", "100%", "2633", "1.6MB/s", "00:00", "web.xml", "Make", "your", "changes", "to", "the", "configureation.", "In", "this", "case,", "change", "the", "port", "you", "are", "running", "on:", "[5:18:51", "hans@circinus-2]pwd", "/home/hans/ics124/conf", "/home/hans/ics124/conf", "[5:18:58", "hans@circinus-2]sed", "-e", "'s/8080/8082/g'", "-i", "server.xml", "Run", "with", "your", "new", "webapps", "dir", "and", "new", "port:", "singularity", "run", "--no-home", "\\", "-B", "/home/hans/ics124/webapps:/usr/local/tomcat/webapps", "\\", "-B", "/home/hans/ics124/conf:/usr/local/tomcat/conf\\", "--writable", "ics124-tomcat:simg", "At", "this", "point", "I", "can", "see", "the", "service", "running", "on", "port", "8082", "on", "the", "singularity", "host.", "MySQL", "Docker", "MySQL", "Docker", "Page", "Pull", "the", "docker", "images", "cd", "~/singularity", "singularity", "pull", "docker://mysql:5.7", "singularity", "build", "--sandbox", "ics124-mysql:simg", "docker://mysql:5.7", "Create", "your", "own", "local", "dirs", "for", "data", ",", "and", "if", "you", "want", "to", "change", "any", "aspect", "of", "the", "configuration,", "conf", ".", "Run", "with", "your", "new", "webapps", "dir", "and", "new", "port:", "MYSQL_ROOT_PASSWORD=hansiskewl", "singularity", "run", "--no-home", "\\", "-B", "/home/hans/ics124/data:/var/lib/mysql", "\\", "-B", "/home/hans/ics124/mysql:/etc/mysql/conf.d", "\\", "--writable", "ics124-mysql:simg", "PHP-Apache", "Docker", "PHP-Apache", "Page", "docker", "run", "--name", "my-apache-php-app", "-d", "php:7.2-apache", "Pull", "the", "docker", "images", "inside", "your", "project", "directory.", "cd", "~/singularity", "singularity", "pull", "docker://php:7.2-apache", "singularity", "build", "--sandbox", "ics124-phpapache:simg", "docker://php:7.2-apache", "Create", "your", "own", "local", "dirs", "for", "data,", "and", "if", "you", "want", "to", "change", "any", "aspect", "of", "the", "configuration,", "conf.", "Run", "with", "your", "new", "webapps", "dir", "and", "new", "port:", "singularity", "run", "--no-home", "\\", "-B", "/home/hans/ics124/var/www/html:/var/www/html", "\\", "-B", "/home/hans/ics124/etc/apache2:/etc/apache2", "\\", "--writable", "ics124-phpapache:simg", "Rebuilding", "PHP-Apache", "Docker", "with", "Additional", "Packages", "PHP-Apache", "Page", "Dockerfile", "FROM", "php:7.3-apache", "USER", "root", "RUN", "apt-get", "update", "&&", "apt-get", "install", "-y", "\\"], "content_hash": "80db46c6c0b40edd694fdaa4a227b8d2"}