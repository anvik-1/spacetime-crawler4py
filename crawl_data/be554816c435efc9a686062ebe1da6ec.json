{"url": "https://grape.ics.uci.edu/wiki/public/attachment/wiki/cs122b-2018-spring-project2/Form.java", "word_count": 548, "words": ["Form.java", "on", "cs122b-2018-spring-project2", "\u2013", "Attachment", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "Back", "to", "cs122b-2018-spring-project2", "cs122b-2018-spring-project2", ":", "Form.java", "File", "Form.java,", "2.9", "KB", "(added", "by", "yicongh1", ",", "8", "years", "ago", ")", "Line", "1", "2", "/*", "A", "servlet", "to", "display", "the", "contents", "of", "the", "MySQL", "movieDB", "database", "*/", "3", "4", "import", "javax.servlet.annotation.WebServlet", ";", "5", "import", "javax.servlet.http.HttpServlet", ";", "6", "import", "javax.servlet.http.HttpServletRequest", ";", "7", "import", "javax.servlet.http.HttpServletResponse", ";", "8", "import", "java.io.IOException", ";", "9", "import", "java.io.PrintWriter", ";", "10", "import", "java.sql.Connection", ";", "11", "import", "java.sql.DriverManager", ";", "12", "import", "java.sql.ResultSet", ";", "13", "import", "java.sql.Statement", ";", "14", "15", "//", "Declaring", "a", "WebServlet", "called", "FormServlet,", "which", "maps", "to", "url", "\"/form\"", "16", "@WebServlet", "(", "name", "=", "\"FormServlet\"", ",", "urlPatterns", "=", "\"/form\"", ")", "17", "18", "public", "class", "Form", "extends", "HttpServlet", "{", "19", "20", "public", "String", "getServletInfo", "()", "{", "21", "return", "\"Servlet", "connects", "to", "MySQL", "database", "and", "displays", "result", "of", "a", "SELECT\"", ";", "22", "}", "23", "24", "//", "Use", "http", "GET", "25", "public", "void", "doGet", "(", "HttpServletRequest", "request", ",", "HttpServletResponse", "response", ")", "26", "throws", "IOException", "{", "27", "String", "loginUser", "=", "\"mytestuser\"", ";", "28", "String", "loginPasswd", "=", "\"mypassword\"", ";", "29", "String", "loginUrl", "=", "\"jdbc:mysql://localhost:3306/moviedb\"", ";", "30", "31", "response", ".", "setContentType", "(", "\"text/html\"", ");", "//", "Response", "mime", "type", "32", "33", "//", "Output", "stream", "to", "STDOUT", "34", "PrintWriter", "out", "=", "response", ".", "getWriter", "();", "35", "36", "//", "building", "page", "head", "with", "title", "37", "out", ".", "println", "(", "\"<html><head><title>MovieDB:", "Found", "Records</title></head>\"", ");", "38", "39", "//", "building", "page", "body", "40", "out", ".", "println", "(", "\"<body><h1>MovieDB:", "Found", "Records</h1>\"", ");", "41", "42", "43", "try", "{", "44", "Class", ".", "forName", "(", "\"com.mysql.jdbc.Driver\"", ").", "newInstance", "();", "45", "46", "//", "Create", "a", "new", "connection", "to", "database", "47", "Connection", "dbCon", "=", "DriverManager", ".", "getConnection", "(", "loginUrl", ",", "loginUser", ",", "loginPasswd", ");", "48", "49", "//", "Declare", "a", "new", "statement", "50", "Statement", "statement", "=", "dbCon", ".", "createStatement", "();", "51", "52", "//", "Retrieve", "parameter", "\"name\"", "from", "request,", "which", "refers", "to", "the", "value", "of", "<input", "name=\"name\">", "in", "index.html", "53", "String", "name", "=", "request", ".", "getParameter", "(", "\"name\"", ");", "54", "55", "//", "Generate", "a", "SQL", "query", "56", "String", "query", "=", "String", ".", "format", "(", "\"SELECT", "*", "from", "stars", "where", "name", "like", "'%s'\"", ",", "name", ");", "57", "58", "//", "Perform", "the", "query", "59", "ResultSet", "rs", "=", "statement", ".", "executeQuery", "(", "query", ");", "60", "61", "//", "Create", "a", "html", "<table>", "62", "out", ".", "println", "(", "\"<table", "border>\"", ");", "63", "64", "//", "Iterate", "through", "each", "row", "of", "rs", "and", "create", "a", "table", "row", "<tr>", "65", "out", ".", "println", "(", "\"<tr><td>ID</td><td>Name</td></tr>\"", ");", "66", "while", "(", "rs", ".", "next", "())", "{", "67", "String", "m_ID", "=", "rs", ".", "getString", "(", "\"ID\"", ");", "68", "String", "m_Name", "=", "rs", ".", "getString", "(", "\"name\"", ");", "69", "out", ".", "println", "(", "String", ".", "format", "(", "\"<tr><td>%s</td><td>%s</td></tr>\"", ",", "m_ID", ",", "m_Name", "));", "70", "}", "71", "out", ".", "println", "(", "\"</table>\"", ");", "72", "73", "74", "//", "Close", "all", "structures", "75", "rs", ".", "close", "();", "76", "statement", ".", "close", "();", "77", "dbCon", ".", "close", "();", "78", "79", "}", "catch", "(", "Exception", "ex", ")", "{", "80", "81", "//", "Output", "Error", "Massage", "to", "html", "82", "out", ".", "println", "(", "String", ".", "format", "(", "\"<html><head><title>MovieDB:", "Error</title></head>\\n<body><p>SQL", "error", "in", "doGet:", "%s</p></body></html>\"", ",", "ex", ".", "getMessage", "()));", "83", "return", ";", "84", "}", "85", "out", ".", "close", "();", "86", "}", "87", "}", "Download", "in", "other", "formats:", "Original", "Format", "Powered", "by", "Trac", "1.5.3", "By", "Edgewall", "Software", ".", "Visit", "the", "Trac", "open", "source", "project", "at", "http://trac.edgewall.org/"], "content_hash": "983f81791fbb71317247116530498286"}