{"url": "https://grape.ics.uci.edu/wiki/public/attachment/wiki/cs122b-2018-spring-project2/Form.java", "word_count": 615, "words": ["Form.java", "on", "c", "122b-2018-", "pring-project2", "\u2013", "Attachment", "\u2013", "Public", "Login", "Preference", "About", "Trac", "Regi", "ter", "Context", "Navigation", "Back", "to", "c", "122b-2018-", "pring-project2", "c", "122b-2018-", "pring-project2", ":", "Form.java", "File", "Form.java,", "2.9", "KB", "(added", "by", "yicongh1", ",", "8", "year", "ago", ")", "Line", "1", "2", "/*", "A", "ervlet", "to", "di", "play", "the", "content", "of", "the", "MySQL", "movieDB", "databa", "e", "*/", "3", "4", "import", "javax.", "ervlet.annotation.WebServlet", ";", "5", "import", "javax.", "ervlet.http.HttpServlet", ";", "6", "import", "javax.", "ervlet.http.HttpServletReque", "t", ";", "7", "import", "javax.", "ervlet.http.HttpServletRe", "pon", "e", ";", "8", "import", "java.io.IOException", ";", "9", "import", "java.io.PrintWriter", ";", "10", "import", "java.", "ql.Connection", ";", "11", "import", "java.", "ql.DriverManager", ";", "12", "import", "java.", "ql.Re", "ultSet", ";", "13", "import", "java.", "ql.Statement", ";", "14", "15", "//", "Declaring", "a", "WebServlet", "called", "FormServlet,", "which", "map", "to", "url", "\"/form\"", "16", "@WebServlet", "(", "name", "=", "\"FormServlet\"", ",", "urlPattern", "=", "\"/form\"", ")", "17", "18", "public", "cla", "Form", "extend", "HttpServlet", "{", "19", "20", "public", "String", "getServletInfo", "()", "{", "21", "return", "\"Servlet", "connect", "to", "MySQL", "databa", "e", "and", "di", "play", "re", "ult", "of", "a", "SELECT\"", ";", "22", "}", "23", "24", "//", "U", "e", "http", "GET", "25", "public", "void", "doGet", "(", "HttpServletReque", "t", "reque", "t", ",", "HttpServletRe", "pon", "e", "re", "pon", "e", ")", "26", "throw", "IOException", "{", "27", "String", "loginU", "er", "=", "\"myte", "tu", "er\"", ";", "28", "String", "loginPa", "wd", "=", "\"mypa", "word\"", ";", "29", "String", "loginUrl", "=", "\"jdbc:my", "ql://localho", "t:3306/moviedb\"", ";", "30", "31", "re", "pon", "e", ".", "etContentType", "(", "\"text/html\"", ");", "//", "Re", "pon", "e", "mime", "type", "32", "33", "//", "Output", "tream", "to", "STDOUT", "34", "PrintWriter", "out", "=", "re", "pon", "e", ".", "getWriter", "();", "35", "36", "//", "building", "page", "head", "with", "title", "37", "out", ".", "println", "(", "\"<html><head><title>MovieDB:", "Found", "Record", "</title></head>\"", ");", "38", "39", "//", "building", "page", "body", "40", "out", ".", "println", "(", "\"<body><h1>MovieDB:", "Found", "Record", "</h1>\"", ");", "41", "42", "43", "try", "{", "44", "Cla", ".", "forName", "(", "\"com.my", "ql.jdbc.Driver\"", ").", "newIn", "tance", "();", "45", "46", "//", "Create", "a", "new", "connection", "to", "databa", "e", "47", "Connection", "dbCon", "=", "DriverManager", ".", "getConnection", "(", "loginUrl", ",", "loginU", "er", ",", "loginPa", "wd", ");", "48", "49", "//", "Declare", "a", "new", "tatement", "50", "Statement", "tatement", "=", "dbCon", ".", "createStatement", "();", "51", "52", "//", "Retrieve", "parameter", "\"name\"", "from", "reque", "t,", "which", "refer", "to", "the", "value", "of", "<input", "name=\"name\">", "in", "index.html", "53", "String", "name", "=", "reque", "t", ".", "getParameter", "(", "\"name\"", ");", "54", "55", "//", "Generate", "a", "SQL", "query", "56", "String", "query", "=", "String", ".", "format", "(", "\"SELECT", "*", "from", "tar", "where", "name", "like", "'%", "'\"", ",", "name", ");", "57", "58", "//", "Perform", "the", "query", "59", "Re", "ultSet", "r", "=", "tatement", ".", "executeQuery", "(", "query", ");", "60", "61", "//", "Create", "a", "html", "<table>", "62", "out", ".", "println", "(", "\"<table", "border>\"", ");", "63", "64", "//", "Iterate", "through", "each", "row", "of", "r", "and", "create", "a", "table", "row", "<tr>", "65", "out", ".", "println", "(", "\"<tr><td>ID</td><td>Name</td></tr>\"", ");", "66", "while", "(", "r", ".", "next", "())", "{", "67", "String", "m_ID", "=", "r", ".", "getString", "(", "\"ID\"", ");", "68", "String", "m_Name", "=", "r", ".", "getString", "(", "\"name\"", ");", "69", "out", ".", "println", "(", "String", ".", "format", "(", "\"<tr><td>%", "</td><td>%", "</td></tr>\"", ",", "m_ID", ",", "m_Name", "));", "70", "}", "71", "out", ".", "println", "(", "\"</table>\"", ");", "72", "73", "74", "//", "Clo", "e", "all", "tructure", "75", "r", ".", "clo", "e", "();", "76", "tatement", ".", "clo", "e", "();", "77", "dbCon", ".", "clo", "e", "();", "78", "79", "}", "catch", "(", "Exception", "ex", ")", "{", "80", "81", "//", "Output", "Error", "Ma", "age", "to", "html", "82", "out", ".", "println", "(", "String", ".", "format", "(", "\"<html><head><title>MovieDB:", "Error</title></head>\\n<body><p>SQL", "error", "in", "doGet:", "%", "</p></body></html>\"", ",", "ex", ".", "getMe", "age", "()));", "83", "return", ";", "84", "}", "85", "out", ".", "clo", "e", "();", "86", "}", "87", "}", "Download", "in", "other", "format", ":", "Original", "Format", "Powered", "by", "Trac", "1.5.3", "By", "Edgewall", "Software", ".", "Vi", "it", "the", "Trac", "open", "ource", "project", "at", "http://trac.edgewall.org/"], "content_hash": "f79b7f9c6804d9e182ead30b9d2c204d"}