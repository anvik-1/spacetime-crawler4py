{"url": "https://grape.ics.uci.edu/wiki/public/attachment/wiki/cs122b-2018-spring-project2/Items.java", "word_count": 549, "words": ["Item", ".java", "on", "c", "122b-2018-", "pring-project2", "\u2013", "Attachment", "\u2013", "Public", "Login", "Preference", "About", "Trac", "Regi", "ter", "Context", "Navigation", "Back", "to", "c", "122b-2018-", "pring-project2", "c", "122b-2018-", "pring-project2", ":", "Item", ".java", "File", "Item", ".java,", "2.5", "KB", "(added", "by", "yicongh1", ",", "8", "year", "ago", ")", "Line", "1", "import", "javax.", "ervlet.annotation.WebServlet", ";", "2", "import", "javax.", "ervlet.http.HttpServlet", ";", "3", "import", "javax.", "ervlet.http.HttpServletReque", "t", ";", "4", "import", "javax.", "ervlet.http.HttpServletRe", "pon", "e", ";", "5", "import", "javax.", "ervlet.http.HttpSe", "ion", ";", "6", "import", "java.io.IOException", ";", "7", "import", "java.io.PrintWriter", ";", "8", "import", "java.util.ArrayLi", "t", ";", "9", "10", "//", "Declaring", "a", "WebServlet", "called", "ItemServlet,", "which", "map", "to", "url", "\"/item", "\"", "11", "@WebServlet", "(", "name", "=", "\"ItemServlet\"", ",", "urlPattern", "=", "\"/item", "\"", ")", "12", "13", "public", "cla", "Item", "extend", "HttpServlet", "{", "14", "public", "void", "doGet", "(", "HttpServletReque", "t", "reque", "t", ",", "15", "HttpServletRe", "pon", "e", "re", "pon", "e", ")", "throw", "IOException", "{", "16", "17", "HttpSe", "ion", "e", "ion", "=", "reque", "t", ".", "getSe", "ion", "();", "//", "Get", "a", "in", "tance", "of", "current", "e", "ion", "on", "the", "reque", "t", "18", "ArrayLi", "t", "<", "String", ">", "previou", "Item", "=", "(", "ArrayLi", "t", "<", "String", ">", ")", "e", "ion", ".", "getAttribute", "(", "\"previou", "Item", "\"", ");", "//", "Retrieve", "data", "named", "\"previou", "Item", "\"", "from", "e", "ion", "19", "20", "//", "If", "\"previou", "Item", "\"", "i", "not", "found", "on", "e", "ion,", "mean", "thi", "i", "a", "new", "u", "er,", "thu", "we", "create", "a", "new", "previou", "Item", "ArrayLi", "t", "for", "the", "u", "er", "21", "if", "(", "previou", "Item", "==", "null", ")", "{", "22", "previou", "Item", "=", "new", "ArrayLi", "t", "<>", "();", "23", "e", "ion", ".", "etAttribute", "(", "\"previou", "Item", "\"", ",", "previou", "Item", ");", "//", "Add", "the", "newly", "created", "ArrayLi", "t", "to", "e", "ion,", "o", "that", "it", "could", "be", "retrieved", "next", "time", "24", "25", "}", "26", "27", "String", "newItem", "=", "reque", "t", ".", "getParameter", "(", "\"newItem\"", ");", "//", "Get", "parameter", "that", "ent", "by", "GET", "reque", "t", "url", "28", "29", "re", "pon", "e", ".", "etContentType", "(", "\"text/html\"", ");", "30", "PrintWriter", "out", "=", "re", "pon", "e", ".", "getWriter", "();", "31", "String", "title", "=", "\"Item", "Purcha", "ed\"", ";", "32", "String", "docType", "=", "33", "\"<!DOCTYPE", "HTML", "PUBLIC", "\\\"-//W3C//DTD", "HTML", "4.0", "Tran", "itional//EN\\\">\\n\"", ";", "34", "out", ".", "println", "(", "String", ".", "format", "(", "\"%", "<html>\\n<head><title>%", "</title></head>\\n<body", "bgcolor=\\\"#FDF5E6\\\">\\n<h1>%", "</h1>\"", ",", "docType", ",", "title", ",", "title", "));", "35", "36", "//", "Inorder", "to", "prevent", "multiple", "client", ",", "reque", "t", "from", "altering", "previou", "Item", "ArrayLi", "t", "at", "the", "ame", "time,", "we", "lock", "the", "ArrayLi", "t", "while", "updating", "37", "ynchronized", "(", "previou", "Item", ")", "{", "38", "if", "(", "newItem", "!=", "null", ")", "{", "39", "previou", "Item", ".", "add", "(", "newItem", ");", "//", "Add", "the", "new", "item", "to", "the", "previou", "Item", "ArrayLi", "t", "40", "}", "41", "42", "//", "Di", "play", "the", "current", "previou", "Item", "ArrayLi", "t", "43", "if", "(", "previou", "Item", ".", "ize", "()", "==", "0", ")", "{", "44", "out", ".", "println", "(", "\"<i>No", "item", "</i>\"", ");", "45", "}", "el", "e", "{", "46", "out", ".", "println", "(", "\"<ul>\"", ");", "47", "for", "(", "Object", "previou", "Item", ":", "previou", "Item", ")", "{", "48", "out", ".", "println", "(", "\"<li>\"", "+", "previou", "Item", ");", "49", "}", "50", "out", ".", "println", "(", "\"</ul>\"", ");", "51", "}", "52", "}", "53", "54", "out", ".", "println", "(", "\"</body></html>\"", ");", "55", "}", "56", "}", "Download", "in", "other", "format", ":", "Original", "Format", "Powered", "by", "Trac", "1.5.3", "By", "Edgewall", "Software", ".", "Vi", "it", "the", "Trac", "open", "ource", "project", "at", "http://trac.edgewall.org/"], "content_hash": "307fe89350427ff6c64f48ab2948f8b9"}