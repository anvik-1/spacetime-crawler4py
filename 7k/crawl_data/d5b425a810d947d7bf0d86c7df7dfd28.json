{"url": "https://swiki.ics.uci.edu/doku.php/hardware:nvidia", "word_count": 948, "words": ["Nvidia", "[Support", "Wiki]", "Trace:", "\u2022", "Nvidia", "Nvidia", "Sidebar", "ICS", "Account", "Announcement", "and", "Maintenance", "Backup", "@", "ICS", "Common", "Ta", "k", "and", "Command", "Group", "File", "Hardware", "Support", "clu", "ter", "in", "tallation", "monitoring", "Storage", "Lab", ":", "Software", "Li", "t", "and", "Other", "Re", "ource", "Laptop", "Checkout", "Policy", "Nvidia", "WIFI", "@", "UCI", "In", "tructional", "Support", "Re", "ource", "Network", "o", "policie", "project", "remote_", "upport", "reque", "ttracker", "Re", "earch", "Support", "ecurity", "ervice", "Software", "Virtual", "Environment", "ICS", "Web", "Application", "wiki", "Table", "of", "Content", "Nvidia", "Nvidia", "Driver", "In", "tall", "Cento", "7", "ubuntu-driver", "Trouble", "hooting", "GPU", "ERR", "Kernel", "Problem", "Failed", "to", "initialize", "NVML:", "Driver/library", "ver", "ion", "mi", "match", "Serial", "number", "for", "GPU", "GPU", "falling", "off", "the", "bu", "Nvlink", "Some", "other", "u", "eful", "command", "From", "Exxact", "GPU", "Validation", "Te", "t", "mprime", "for", "CPU/Memory", "Nvidia", "Nvidia", "Driver", "In", "tall", "Cento", "7", "Redhat", "i", "not", "upporting", "con", "umer", "NVidia", "card", "o", "we", "followed", "thi", "webpage", "to", "get", "the", "driver", "load:", "http", "://acce", ".redhat.com/", "olution", "/1155663", "Step", "1", "below", "can", "probably", "be", "kipped", "a", "it", "eemed", "to", "be", "blackli", "ted", "already.", "Edit", "Grub2", "to", "blackli", "t", "the", "Nouveau", "driver:", "Edit", "/etc/default/grub", "and", "add", "the", "following", "to", "the", "GRUB_CMDLINE_LINUX", "line:", "modprobe.blackli", "t=nouveau", "Rebuild", "the", "grub", "config", "and", "re", "tart", "the", "y", "tem:", "Rebuild", "the", "/boot/grub2/grub.cfg", "file", "by", "running", "the", "grub2-mkconfig", "-o", "command", "a", "follow", ":", "On", "BIOS-ba", "ed", "machine", ":", "grub2-mkconfig", "-o", "/boot/grub2/grub.cfg", "On", "UEFI-ba", "ed", "machine", ":", "grub2-mkconfig", "-o", "/boot/efi/EFI/cento", "/grub.cfg", "Re", "tart", "the", "y", "tem.", "NOTE:", "Sometime", "even", "after", "following", "the", "above", "tep", "to", "blackli", "t", "nouveau", "module,", "it", "i", "een", "loaded", "at", "boot.", "#", "l", "mod", "|", "grep", "-i", "nouveau", ".", "Mo", "t", "likely,", "thi", "get", "loaded", "from", "initramf", ".", "In", "uch", "ca", "e", ",", "follow", "\u201c", "How", "to", "blackli", "t", "nouveau", "module", "on", "Red", "Hat", "Enterpri", "e", "Linux", "7?", "\u201d", "In", "tall", "late", "t", "nvidia", "driver", "from", "cuda", "repo", "yum", "in", "tall", "nvidia-driver-late", "t", "\u2013enablerepo", "cuda", "Rebuild", "initramf", ":", "Back", "up", "the", "current", "initramf", "mv", "/boot/initramf", "-$(uname", "-r).img", "/boot/initramf", "-$(uname", "-r)-nouveau.img", "Build", "the", "new", "one:", "dracut", "/boot/initramf", "-$(uname", "-r).img", "$(uname", "-r)", "Reboot", "the", "y", "tem", "Run", "'nvidia-", "mi'", "to", "check", "that", "the", "nvidia", "card", "are", "vi", "ible", "ubuntu-driver", "Thi", "will", "how", "the", "card", "in", "the", "erver", "along", "with", "available", "nvidia", "driver", ".", "ubuntu-driver", "device", "Trouble", "hooting", "GPU", "ERR", "nvidia-", "mi", "how", "ERR!", "on", "one", "of", "the", "card", ".", "You", "can", "re", "et", "all", "the", "card", "with:", "nvidia-", "mi", "-r", "Or", "for", "a", "pecific", "GPU", "card:", "nvidia-", "mi", "--gpu-re", "et", "-i", "\"gpu-id\"", "For", "card", "that", "are", "linked", "by", "an", "NVLINK,", "you", "will", "need", "to", "re", "et", "both", "GPU", ":", "nvidia-", "mi", "--gpu-re", "et", "-i", "\"gpu-id-1,", "gpu-id-2\"", "If", "the", "GPU", "till", "ha", "a", "proce", "latched", "onto", "it,", "you", "can", "find", "out", "the", "proce", "by", "running:", "fu", "er", "-v", "/dev/nvidia*", "You", "can", "then", "kill", "the", "PID.", "Kernel", "Problem", "Sometime", "the", "kernel", "i", "older", "than", "the", "new", "driver", ".", "You", "will", "ee", "omething", "like", "thi", ":", "NOTE:", "Skipping", "kernel", "in", "tallation", "ince", "no", "NVIDIA", "driver", "kernel", "module", "package", "kmod-nvidia-450.51.06-4.18.0-240.1.1", "for", "kernel", "kernel-4.18.0-240.1.1.el8_3.x86_64", "and", "driver", "nvidia-driver-3:450.51.06-1.el8.x86_64", "could", "be", "found", "In", "thi", "ca", "e,", "I", "unin", "talled", "kmod-nvidia-late", "t-dkm", "and", "updated", "the", "kernel.", "Then", "rein", "talled", "the", "nvidia", "driver", ".", "Not", "having", "the", "correct", "matching", "kernel", "driver", "for", "the", "nvidia", "driver", "can", "re", "ult", "in", "nvidia-", "mi", "from", "not", "working.", "Failed", "to", "initialize", "NVML:", "Driver/library", "ver", "ion", "mi", "match", "Got", "thi", "error", "on", "an", "Ubuntu", "ho", "t.", "Check", "the", "following", "two", "item", "for", "nvidia", "ver", "ion", "cat", "/proc/driver/nvidia/ver", "ion", "dpkg", "-l", "|", "grep", "nvidia-driver", "To", "re", "olve", "the", "mi", "match,", "mo", "t", "ay", "to", "reboot.", "If", "not", "po", "ible,", "do", "the", "following:", "rmmod", "nvidia_drm", "rmmod", "nvidia_mode", "et", "rmmod", "nvidia_uvm", "rmmod", "nvidia", "nvidia-", "mi", "If", "thi", "a", "lurm", "node,", "plea", "e", "re", "tart", "lurm", "ervice.", "Serial", "number", "for", "GPU", "nvarr=($(nvidia-", "mi", "-L", "|", "awk", "'", "{g", "ub(/:/,", "\"\");", "print", "$2}'));", "for", "i", "in", "\"${nvarr[@]}\";", "do", "nvidia-", "mi", "-i", "$i", "-q", "|", "grep", "-E", "'GPU", "00000000|Minor", "Number|Product", "Name|Product", "Brand|Serial';", "done", "The", "command", "will", "li", "t", "the", "GPU", "and", "the", "erial", "for", "it.", "You", "can", "compare", "the", "bu", "lot", "number", "with", "the", "GPU", "erial", "number", "to", "know", "where", "the", "card", "got", "moved.", "Another", "method", "i", ":", "nvidia-", "mi", "--query-gpu=gpu_name,pci.bu", ",gpu_bu", "_id,", "erial,gpu_uuid", "--format=c", "v", "GPU", "falling", "off", "the", "bu", "We", "have", "een", "thi", "behavior", "with", "overheating", "card", "/computationally", "inten", "e", "job", ".", "Example:", "imon", "-1#", "nvidia-", "mi", "Unable", "to", "determine", "the", "device", "handle", "for", "GPU0000:B2:00.0:", "Unknown", "Error", "Solution:", "add", "to", "grub", "config", "/etc/default/grub:", "GRUB_CMDLINE_LINUX_DEFAULT=\"pci=realloc=off\"", "Nvlink", "Once", "nvlink", "ha", "been", "in", "talled,", "you", "can", "check", "that", "everything", "i", "linked", "up", "working", "properly.", "In", "the", "example", "below,", "two", "nvlink", "are", "in", "talled", "on", "two", "pair", "of", "graphic", "card", ".", "#", "nvidia-", "mi", "topo", "-m", "GPU0", "GPU1", "GPU2", "GPU3", "CPU", "Affinity", "NUMA", "Affinity", "GPU0", "X", "NV2", "SYS", "SYS", "0-15,32-47", "0", "GPU1", "NV2", "X", "SYS", "SYS", "0-15,32-47", "0", "GPU2", "SYS", "SYS", "X", "NV2", "16-31,48-63", "1", "GPU3", "SYS", "SYS", "NV2", "X", "16-31,48-63", "1", "Legend:", "X", "=", "Self", "SYS", "=", "Connection", "traver", "ing", "PCIe", "a", "well", "a", "the", "SMP", "interconnect", "between", "NUMA", "node", "(e.g.,", "QPI/UPI)", "NODE", "=", "Connection", "traver", "ing", "PCIe", "a", "well", "a", "the", "interconnect", "between", "PCIe", "Ho", "t", "Bridge", "within", "a", "NUMA", "node", "PHB", "=", "Connection", "traver", "ing", "PCIe", "a", "well", "a", "a", "PCIe", "Ho", "t", "Bridge", "(typically", "the", "CPU)", "PXB", "=", "Connection", "traver", "ing", "multiple", "PCIe", "bridge", "(without", "traver", "ing", "the", "PCIe", "Ho", "t", "Bridge)", "PIX", "=", "Connection", "traver", "ing", "at", "mo", "t", "a", "ingle", "PCIe", "bridge", "NV#", "=", "Connection", "traver", "ing", "a", "bonded", "et", "of", "#", "NVLink", "Some", "other", "u", "eful", "command", "http", "://nvidia.cu", "thelp.com/app/an", "wer", "/detail/a_id/3751/~/u", "eful-nvidia-", "mi-querie", "nvidia-", "mi", "--query-gpu=gpu_name,gpu_bu", "_id,vbio", "_ver", "ion", "--format=c", "v", "nvidia-", "mi", "--query-gpu=time", "tamp,name,pci.bu", "_id,driver_ver", "ion,p", "tate,pcie.link.gen.max,pcie.link.gen.current,temperature.gpu,utilization.gpu,utilization.memory,memory.total,memory.free,memory.u", "ed", "--format=c", "v", "-l", "5", "From", "Exxact", "GPU", "Validation", "Te", "t", "http", "://exxact.atla", "ian.net/", "ervicede", "k/cu", "tomer/portal/1/article/632029199", "mprime", "for", "CPU/Memory", "http", "://exxact.atla", "ian.net/", "ervicede", "k/cu", "tomer/portal/1/article/755041176"], "content_hash": "2703b081e85d51f7e5bcab684e3687b6"}