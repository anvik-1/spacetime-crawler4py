{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2018-winter-project5", "word_count": 3117, "words": ["c", "122b-2018-winter-project5", "\u2013", "Public", "Login", "Preference", "About", "Trac", "Regi", "ter", "wiki:", "c", "122b-2018-winter-project5", "Context", "Navigation", "Hi", "tory", "CS122B", "Project", "5:", "Scaling", "Fabflix", "and", "Performance", "Tuning", "Ta", "k", "1:", "Connection", "Pooling", "and", "Prepared", "Statement", "Ta", "k", "2:", "Scaling", "Fabflix", "Ta", "k", "3:", "Mea", "uring", "the", "performance", "of", "Fabflix", "earch", "feature", "Ta", "k", "3.1:", "Preparing", "the", "codeba", "e", "for", "time", "mea", "urement", "Ta", "k", "3.2:", "Preparing", "the", "te", "t", "plan", "in", "Apache", "JMeter", "Ta", "k", "3.3:", "Collecting", "the", "performance", "re", "ult", "Deployment", "On", "AWS", "Submi", "ion", ",", "Demon", "tration", "and", "Grading", "Criteria", "CS122B", "Project", "5:", "Scaling", "Fabflix", "and", "Performance", "Tuning", "Deadline:", "Sunday,", "3/18/2018,", "11:45pm.", "Due", "on", "Github", "Thi", "project", "ha", "the", "following", "ta", "k", ":", "JDBC", "connection", "pooling", "and", "Prepared", "tatement", "Scaling", "Fabflix", "with", "a", "clu", "ter", "of", "MySQL/Tomcat", "and", "a", "frontend", "load", "balancer;", "Mea", "uring", "the", "performance", "of", "Fabflix", "earch", "feature", "Ta", "k", "1:", "Connection", "Pooling", "and", "Prepared", "Statement", "In", "thi", "ta", "k,", "we", "will", "enable", "Fabflix", "with", "Connection", "Pooling", "and", "Prepared", "Statement", ".", "'Step", "1:", "Enable", "JDBC", "connection", "pooling", "for", "Fabflix", "for", "all", "ervlet", ".", "We", "will", "u", "e", "our", "running", "application", "of", "\"TomcatTe", "t\"", "to", "how", "how", "to", "change", "it", "to", "u", "e", "connection", "pooling.", "Copy", "the", "JDBC", "Driver'", "jar", "into", "$CATALINA_HOME/lib", "(the", "lib", "folder", "ju", "t", "in", "ide", "tomcat", "directory.", "If", "the", "lib", "folder", "i", "not", "there,", "create", "it).", "Download", "and", "deploy", "the", "following", "TomcatPooling.war", "\u200b", "file.", "The", "file", "TomcatPooling\\META-INF\\context.xml", "include", "important", "information", "about", "the", "databa", "e,", "u", "er", "name,", "pa", "word,", "and", "pooling", "configuration.", "If", "you", "want", "to", "change", "thi", "file,", "you", "need", "to", "undeploy", "the", "war", "file,", "make", "tho", "e", "change", ",", "make", "a", "new", "war", "file,", "and", "deploy", "the", "new", "war", "file.", "Otherwi", "e,", "the", "Tomcat", "erver", "may", "till", "u", "e", "the", "previou", "context.xml.", "Check", "\u200b", "http://tomcat.apache.org/tomcat-8.5-doc/jndi-data", "ource-example", "-howto.html", "for", "more", "information", "about", "how", "to", "configure", "connection", "pooling.", "Go", "to", "the", "link", "\u200b", "http://localho", "t:8080/TomcatPooling/", "ervlet/TomcatTe", "t", "to", "te", "t", "your", "application.", "You", "mu", "t", "ee", "a", "li", "t", "of", "row", "di", "played", "on", "the", "webpage.", "Look", "into", "the", "following", "file", "for", "the", "main", "change", "in", "thi", "war", "file", "compared", "to", "the", "previou", "war", "file", "without", "connection", "pooling:", "\\META-INF\\context.xml", ".", "\\WEB-INF\\", "ource", "\\TomcatTe", "t.java", "\\WEB-INF\\web.xml", "(", "ee", "the", "re", "ource-ref", "tag).", "You", "may", "al", "o", "find", "ome", "u", "eful", "link", "for", "connection", "pooling", "from", "\u200b", "thi", "tutorial", ".", "Step", "2:", "Make", "ure", "to", "u", "e", "Prepared", "Statement", "in", "all", "JDBC", "tatement", "involved", "in", "earch", ".", "You", "can", "u", "e", "thi", "\u200b", "tutorial", "on", "prepared", "tatement", ".", "Prepared", "tatement", "are", "u", "ually", "a", "ociated", "with", "one", "connection,", "which", "become", "tricky", "if", "you", "are", "u", "ing", "a", "connection", "pool.", "There", "i", "a", "etting", "'cachePrepStmt", "'", "which", "can", "be", "et", "to", "true", "to", "cache", "the", "prepared", "tatement", ".", "You", "can", "make", "thi", "etting", "true", "by", "adding", "the", "flag", "to", "the", "jdbc", "connection", "URL", "in", "the", "\\META-INF\\context.xml", "like", "thi", "-", "url=\"jdbc:my", "ql://<IP>:<PORT>/moviedb?autoReconnect=true&amp;u", "eSSL=fal", "e&amp;cachePrepStmt", "=true", "When", "you", "are", "done,", "write", "a", "brief", "explanation", "of", "how/where", "(file", "path", "and", "line", "number", "a", "een", "on", "Github,", "and", "nap", "hot", "of", "your", "code)", "you", "u", "e", "the", "JDBC", "connection", "pooling", "and", "prepared", "tatement", "in", "your", "code.", "You", "hould", "ubmit", "thi", "report", "to", "Github.", "Ta", "k", "2:", "Scaling", "Fabflix", "Step", "1", ":", "Setup", "two", "AWS", "in", "tance", "a", "two", "backend", "erver", "by", "following", "thi", "MySQL", "replication", "tutorial", ".", "We", "call", "them", "the", "\"ma", "ter", "in", "tance\"", "and", "the", "\"", "lave", "in", "tance\"", "(in", "the", "context", "of", "MySQL", "replication).", "Step", "2", "(ma", "ter/", "lave)", ":", "Create", "a", "dummy", "u", "er", "for", "two", "example", "Tomcat", "application", ":", "hell>", "my", "ql", "-u", "root", "-p", "my", "ql>", "CREATE", "USER", "'myte", "tu", "er'@'localho", "t'", "IDENTIFIED", "BY", "'mypa", "word';", "my", "ql>", "GRANT", "ALL", "ON", "*.*", "TO", "'myte", "tu", "er'@'localho", "t';", "Step", "3", "(ma", "ter/", "lave)", ":", "Setup", "Tomcat", "on", "each", "ma", "ter/", "lave", "in", "tance.", "(You", "hould", "have", "done", "it", "many", "time", ".)", "Step", "4", "(ma", "ter/", "lave)", ":", "On", "each", "ma", "ter/", "lave", "in", "tance,", "deploy", "TomcatTe", "t.war", ".", "Make", "the", "URL", "\u200b", "http://PUBLIC_IP:8080/TomcatTe", "t/", "ervlet/TomcatTe", "t", "work.", "You", "may", "need", "to", "modify", "the", "u", "ername/pa", "word", "and", "IP", "addre", "(u", "e", "the", "internal", "AWS", "in", "tance", "addre", ").", "Al", "o", "make", "ure", "to", "modify", "the", "AWS", "ecurity", "group", "etting", "for", "the", "e", "two", "in", "tance", "to", "allow", "remote", "acce", "to", "their", "8080", "port.", "Step", "5", "(ma", "ter/", "lave)", ":", "On", "each", "ma", "ter/", "lave", "in", "tance,", "deploy", "Se", "ion.war", ".", "Make", "the", "URL", "\u200b", "http://PUBLIC_IP:8080/Se", "ion/", "ervlet/ShowSe", "ion?myname=Michael", "work.", "Step", "6", "(in", "tance", "1)", ":", "On", "the", "in", "tance", "that", "run", "the", "original", "Fablix", "in", "tance", "(called", "\"in", "tance", "1\"),", "etup", "Apache", "and", "it", "proxy", "by", "doing", "the", "following:", "In", "tall", "Apache2", "and", "related", "module", ":", "in", "tance1-", "hell>", "udo", "apt-get", "in", "tall", "apache2", "in", "tance1-", "hell>", "udo", "a2enmod", "proxy", "proxy_balancer", "proxy_http", "rewrite", "header", "lbmethod_byreque", "t", "in", "tance1-", "hell>", "udo", "ervice", "apache2", "re", "tart", "Configure", "the", "Apache2", "web", "erver", "to", "u", "e", "it", "proxy_balancer", "module", "for", "haring", "(i.e.,", "redirecting)", "reque", "t", "to", "the", "backend", "in", "tance", ".", "To", "do", "it,", "edit", "the", "following", "configuration", "file:", "in", "tance1-", "hell>", "udo", "vim", "/etc/apache2/", "ite", "-enabled/000-default.conf", "Create", "a", "load", "balancer", "proxy,", "who", "e", "member", "are", "the", "backend", "in", "tance", ".", "In", "particular,", "define", "a", "proxy", "on", "top", "of", "the", "file,", "before", "the", "<VirtualHo", "t", "*:80>", "tag.", "<Proxy", "\"balancer://TomcatTe", "t_balancer\">", "BalancerMember", "\"http://172.2.2.2:8080/TomcatTe", "t/\"", "BalancerMember", "\"http://172.3.3.3:8080/TomcatTe", "t/\"", "</Proxy>", "Here", "we", "a", "ume", "'172.2.2.2'", "and", "'172.3.3.3'", "are", "the", "private", "IP", "addre", "of", "the", "ma", "ter", "and", "lave", "in", "tance", ",", "re", "pectively.", "Add", "two", "new", "rule", "in", "the", "body", "of", "the", "VirtualHo", "t", "tag.", "ProxyPa", "/TomcatTe", "t", "balancer://TomcatTe", "t_balancer", "ProxyPa", "Rever", "e", "/TomcatTe", "t", "balancer://TomcatTe", "t_balancer", "Re", "tart", "Apache:", "in", "tance1-", "hell>", "udo", "ervice", "apache2", "re", "tart", "Modify", "the", "ecurity", "group", "of", "the", "two", "backend", "in", "tance", "to", "allow", "in", "tance", "1", "to", "acce", "their", "8080", "port.", "The", "e", "etting", "will", "redirect", "HTTP", "reque", "t", "to", "\"in", "tance1_IP/TomcatTe", "t\"", "to", "one", "of", "the", "two", "backend", "in", "tance", ".", "To", "te", "t", "it,", "u", "e", "a", "brow", "er", "to", "point", "to", "\u200b", "http://in", "tance1_IP/TomcatTe", "t/", "ervlet/TomcatTe", "t", ".", "Be", "ure", "to", "open", "port", "80"], "content_hash": "12b1689843c6566b8230c0dc207c11a9"}