{"url": "https://grape.ics.uci.edu/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project2/Items.java", "word_count": 324, "words": ["import", "javax.", "ervlet.annotation.WebServlet;", "import", "javax.", "ervlet.http.HttpServlet;", "import", "javax.", "ervlet.http.HttpServletReque", "t;", "import", "javax.", "ervlet.http.HttpServletRe", "pon", "e;", "import", "javax.", "ervlet.http.HttpSe", "ion;", "import", "java.io.IOException;", "import", "java.io.PrintWriter;", "import", "java.util.ArrayLi", "t;", "//", "Declaring", "a", "WebServlet", "called", "ItemServlet,", "which", "map", "to", "url", "\"/item", "\"", "@WebServlet(name", "=", "\"ItemServlet\",", "urlPattern", "=", "\"/item", "\")", "public", "cla", "Item", "extend", "HttpServlet", "{", "public", "void", "doGet(HttpServletReque", "t", "reque", "t,", "HttpServletRe", "pon", "e", "re", "pon", "e)", "throw", "IOException", "{", "HttpSe", "ion", "e", "ion", "=", "reque", "t.getSe", "ion();", "//", "Get", "a", "in", "tance", "of", "current", "e", "ion", "on", "the", "reque", "t", "ArrayLi", "t", "previou", "Item", "=", "(ArrayLi", "t", ")", "e", "ion.getAttribute(\"previou", "Item", "\");", "//", "Retrieve", "data", "named", "\"previou", "Item", "\"", "from", "e", "ion", "//", "If", "\"previou", "Item", "\"", "i", "not", "found", "on", "e", "ion,", "mean", "thi", "i", "a", "new", "u", "er,", "thu", "we", "create", "a", "new", "previou", "Item", "ArrayLi", "t", "for", "the", "u", "er", "if", "(previou", "Item", "==", "null)", "{", "previou", "Item", "=", "new", "ArrayLi", "t<>();", "e", "ion.", "etAttribute(\"previou", "Item", "\",", "previou", "Item", ");", "//", "Add", "the", "newly", "created", "ArrayLi", "t", "to", "e", "ion,", "o", "that", "it", "could", "be", "retrieved", "next", "time", "}", "String", "newItem", "=", "reque", "t.getParameter(\"newItem\");", "//", "Get", "parameter", "that", "ent", "by", "GET", "reque", "t", "url", "re", "pon", "e.", "etContentType(\"text/html\");", "PrintWriter", "out", "=", "re", "pon", "e.getWriter();", "String", "title", "=", "\"Item", "Purcha", "ed\";", "String", "docType", "=", "\"", "\\n\";", "out.println(String.format(\"%", "\\n", "%", "\\n\\n", "%", "\",", "docType,", "title,", "title));", "//", "Inorder", "to", "prevent", "multiple", "client", ",", "reque", "t", "from", "altering", "previou", "Item", "ArrayLi", "t", "at", "the", "ame", "time,", "we", "lock", "the", "ArrayLi", "t", "while", "updating", "ynchronized", "(previou", "Item", ")", "{", "if", "(newItem", "!=", "null)", "{", "previou", "Item", ".add(newItem);", "//", "Add", "the", "new", "item", "to", "the", "previou", "Item", "ArrayLi", "t", "}", "//", "Di", "play", "the", "current", "previou", "Item", "ArrayLi", "t", "if", "(previou", "Item", ".", "ize()", "==", "0)", "{", "out.println(\"", "No", "item", "\");", "}", "el", "e", "{", "out.println(\"", "\");", "for", "(Object", "previou", "Item", ":", "previou", "Item", ")", "{", "out.println(\"", "\"", "+", "previou", "Item);", "}", "out.println(\"", "\");", "}", "}", "out.println(\"\");", "}", "}"], "content_hash": "bdfa20eae79a661555d7880a397ec2b6"}