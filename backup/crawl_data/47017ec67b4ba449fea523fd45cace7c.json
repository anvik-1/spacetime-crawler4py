{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2017-winter-project3?action=diff&version=1", "word_count": 2237, "words": ["cs122b-2017-winter-project3", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Initial", "Version", "and", "Version", "1", "of", "cs122b-2017-winter-project3", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Feb", "1,", "2017,", "9:08:30", "PM", "(", "9", "years", "ago)", "Author:", "Chen", "Luo", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs122b-2017-winter-project3", "v1", "v1", "1", "[[PageOutline]]", "2", "3", "=", "CS122B", "Project", "3:", "reCaptcha,", "HTTPS,", "Stored", "Procedure,", "XML", "Parsing", "(Under", "Development)", "=", "4", "'''Due:", "2/20/2017,", "Monday,", "11:45", "pm.", "Submit", "on", "EEE.'''[[BR]]", "Notice", "that", "we", "use", "1", "day", "after", "the", "official", "deadline", "as", "the", "submission", "cut-off", "time", "on", "EEE", "to", "allow", "you", "to", "use", "the", "24-hour", "grace", "period", "if", "you", "chose", "so.", "After", "that,", "EEE", "will", "no", "longer", "accept", "submissions.", "5", "6", "=", "Tasks", "=", "7", "1.", "(Optional)", "Register", "a", "domain", "name", "for", "Fabflix.", "8", "1.", "Adding", "reCAPTCHA", "to", "Project", "2", "9", "1.", "Adding", "HTTPS", "to", "Project", "2", "10", "1.", "Implementing", "an", "HTTPS-based", "Dashboard", "for", "Fabflix's", "employees", "11", "1.", "Importing", "large", "XML", "data", "files", "into", "the", "Fabflix", "database", "12", "13", "----", "14", "==", "Task", "1", "(Optional):", "Register", "a", "domain", "name", "for", "Fabflix", "==", "15", "If", "you", "are", "tired", "of", "using", "an", "IP", "address", "to", "visit", "your", "AWS", "instance", "and", "want", "to", "make", "it", "\"real,\"", "you", "can", "register", "a", "domain", "name", "from", "a", "registrar", "company", "such", "as", "[http://godaddy.com", "Godaddy].", "Then", "use", "the", "AWS", "instance", "to", "do", "the", "hosting.", "Now", "we", "are", "open", "for", "real", "business!", "16", "17", "----", "18", "==", "Task", "2:", "Adding", "reCAPTHA", "to", "Project", "2", "==", "19", "Improve", "the", "user-authentication", "process", "of", "project", "2", "by", "adding", "a", "module", "that", "verifies", "real", "users", "and", "blocks", "bots.", "20", "21", "1.", "Get", "a", "[https://www.google.com/recaptcha/intro/index.html", "reCAPTCHA]", "from", "Google.", "Use", "the", "public", "IP", "of", "your", "AWS", "instance", "as", "the", "domain.", "You", "will", "get", "a", "''secret", "key''", "and", "a", "''site", "key''.", "22", "1.", "Download", "and", "deploy", "[attachment:wiki:cs122b-2016-winter-project3:TomcatFormReCaptcha.war", "TomcatFormReCaptcha.war].", "23", "1.", "Follow", "the", "instructions", "at", "[https://developers.google.com/recaptcha/docs/secure_token", "here]", "to", "modify", "the", "file", "\"webapps/TomcatFormReCaptcha/index.html\".", "In", "particular,", "use", "your", "own", "\"site", "key\"", "to", "replace", "the", "\"data-sitekey\"", "value.", "24", "1.", "Test", "the", "page", "http://YOUR_IP:8080/TomcatFormReCaptcha", "to", "see", "if", "reCAPTHA", "works", "for", "the", "front", "end.", "25", "1.", "Read", "and", "understand", "the", "file", "\"sources/TomcatFormReCaptcha.java\",", "especially", "the", "logic", "related", "to", "verifying", "\"g-recaptcha-response\".", "Also", "modify", "the", "file", "\"!MyConstants.java\"", "to", "use", "your", "own", "\"SITE_KEY\"", "and", "\"SECRET_KEY\"", "values.", "26", "1.", "Recompile", "the", "Java", "files", "and", "reload", "the", "app", "using", "the", "Tomcat", "console.", "Test", "if", "the", "backend", "of", "reCAPTHA", "is", "working", "properly.", "27", "1.", "Apply", "the", "same", "logic", "to", "your", "project", "2", "by", "making", "the", "necessary", "changes", "on", "the", "login", "frontend", "and", "backend", "logic.", "28", "29", "==", "Task", "3:", "Adding", "HTTPS", "to", "Project", "2", "==", "30", "See", "this", "[http://tecadmin.net/configure-ssl-certificate-in-tomcat/", "reference]", "on", "how", "to", "configure", "Tomcat", "to", "enable", "HTTPS", "connections.", "31", "32", "Step", "1:", "On", "your", "AWS", "instance,", "use", "the", "following", "command", "to", "create", "a", "keystore", "to", "be", "used", "by", "Tomcat.", "Remember", "what", "password", "you", "use", "for", "the", "keystore.", "Our", "example", "uses", "\"changeit\".", "33", "34", "{{{", "35", "sudo", "keytool", "-genkey", "-alias", "fabflix", "-keyalg", "RSA", "-keystore", "/etc/tomcat8.5/keystore", "36", "}}}", "37", "Step", "2:", "Uncomment", "the", "`Connector`", "tag", "in", "`/etc/tomcat8.5/server.xml`,", "which", "has", "port=\"8443\"", "and", "defines", "an", "SSL", "HTTP/1.1", "connector.", "Modify", "it", "and", "use", "the", "following", "configuration:", "38", "39", "{{{", "40", "<Connector", "port=\"8443\"", "41", "protocol=\"HTTP/1.1\"", "42", "connectionTimeout=\"20000\"", "43", "redirectPort=\"8443\"", "44", "SSLEnabled=\"true\"", "45", "scheme=\"https\"", "46", "secure=\"true\"", "47", "sslProtocol=\"TLS\"", "48", "keystoreFile=\"/etc/tomcat8.5/keystore\"", "49", "keystorePass=\"changeit\"", "/>", "50", "}}}", "51", "Step", "3:", "Restart", "tomcat:", "52", "53", "{{{", "54", "sudo", "service", "tomcat", "restart", "55", "}}}", "56", "At", "this", "point,", "https://[YOUR_IP]:8443/manager/html", "should", "also", "an", "entry", "point", "to", "Tomcat.", "Note", "that", "it", "uses", "the", "secure", "kind", "of", "http", "(https)", "and", "a", "different", "port,", "which", "is", "8443", "by", "default.", "Make", "sure", "to", "open", "the", "port", "8443", "on", "your", "AWS", "instance.", "57", "58", "Step", "4:", "Limit", "a", "Tomcat", "application", "to", "HTTPS", "only.", "Currently", "http://YOUR_IP:8080/manager/html", "entry", "(which", "uses", "HTTP)", "is", "still", "open.", "In", "order", "to", "disable", "HTTP", "and", "enable", "HTTPS", "only,", "change", "your", "!TomcatFormReCaptcha", "application's", "web.xml", "by", "adding", "the", "following", "code", "before", "the", "\"</web-app>\"", "tag:", "59", "60", "{{{", "61", "<security-constraint>", "62", "<web-resource-collection>", "63", "<web-resource-name>HTTPSOnly</web-resource-name>", "64", "<url-pattern>/*</url-pattern>", "65", "</web-resource-collection>", "66", "<user-data-constraint>", "67", "<transport-guarantee>CONFIDENTIAL</transport-guarantee>", "68", "</user-data-constraint>", "69", "</security-constraint>", "70", "}}}", "71", "This", "setting", "will", "force", "all", "HTTP", "requests", "to", "this", "application", "to", "get", "redirected", "to", "the", "corresponding", "HTTPS", "URL.", "Reload", "the", "application", "to", "see", "if", "the", "redirection", "works", "for", "the", "URL", "http://YOUR_IP:8080/TomcatFormReCaptcha/.", "Read", "this", "[http://www.itworld.com/article/2769041/development/how-to-configure-tomcat-to-always-require-https.html", "reference]", "on", "more", "details", "about", "how", "to", "configure", "Tomcat", "to", "always", "require", "HTTPS.", "72", "73", "Step", "5:", "Make", "necessary", "changes", "to", "your", "project", "2", "to", "use", "HTTPS", "always", "with", "HTTP", "disabled.", "74", "75", "==", "Task", "4:", "Implementing", "an", "HTTPS-based", "Dashboard", "for", "Fabflix's", "employees", "==", "76", "77", "Step", "1:", "To", "store", "information", "about", "Fabflix's", "employees,", "create", "a", "new", "table", "called", "'''", "employees'''", "with", "the", "following", "attributes:", "78", "{{{", "79", "email", "varchar(50)", "primary", "key", "80", "password", "varchar(20)", "not", "null", "81", "fullname", "varchar(100)", "82", "}}}", "83", "84", "Step", "2:", "Setup", "an", "entry", "point", "https://YOUR_IP:8443/fabflix/_dashboard", "that", "uses", "HTTPS.", "It", "allows", "employees", "to", "login", "with", "a", "valid", "email", "and", "password", "to", "access", "a", "dashboard.", "85", "86", "Step", "3:", "Allow", "a", "logged-in", "employee", "to", "do", "the", "following", "operations", "using", "this", "dashboard.", "(You", "can", "reuse", "part", "of", "your", "code", "in", "Project", "1.)", "87", "88", "*", "Inserting", "a", "new", "star", "into", "the", "database.", "If", "the", "star", "has", "a", "single", "name,", "add", "it", "as", "his", "last_name", "and", "assign", "an", "empty", "string", "(\"\")", "to", "first_name.", "89", "*", "Providing", "the", "metadata", "of", "the", "database;", "in", "particular,", "show", "the", "name", "of", "each", "table", "and,", "for", "each", "table,", "each", "attribute", "and", "its", "type.", "90", "91", "Step", "4:", "Write", "a", "stored", "procedure", "called", "''", "add_movie''", ".", "Its", "arguments", "include", "all", "the", "required", "fields", "of", "the", "movie,", "a", "''", "single''", "star", "and", "a", "''", "single''", "genre.", "(The", "reason", "we", "don't", "want", "to", "pass", "multiple", "stars", "and", "genres", "is", "that", "the", "current", "MySQL", "implementation", "doesn't", "allow", "stored", "procedures", "to", "take", "an", "array", "argument.)", "If", "a", "record", "corresponding", "to", "the", "star", "or", "genre", "exists,", "it", "is", "linked", "to", "the", "movie;", "if", "not,", "it", "is", "created", "and", "then", "linked", "to", "the", "movie.", "Insert", "a", "movie", "only", "if", "it", "does"], "content_hash": "99cc167c4cd267011969b0db40340e19"}