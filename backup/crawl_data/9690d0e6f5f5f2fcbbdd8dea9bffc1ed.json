{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs222p-2017-fall-project4?action=diff&version=1", "word_count": 4207, "words": ["cs222p-2017-fall-project4", "(diff)", "\u2013", "Public", "Login", "Preferences", "About", "Trac", "Register", "Context", "Navigation", "\u2190", "Previous", "Change", "Wiki", "History", "Next", "Change", "\u2192", "Changes", "between", "Initial", "Version", "and", "Version", "1", "of", "cs222p-2017-fall-project4", "View", "differences", "inline", "side", "by", "side", "Show", "lines", "around", "each", "change", "Show", "the", "changes", "in", "full", "context", "Ignore:", "Blank", "lines", "Case", "changes", "White", "space", "changes", "Timestamp:", "Nov", "20,", "2017,", "9:39:06", "PM", "(", "8", "years", "ago)", "Author:", "Zuozhi", "Wang", "Comment:", "--", "Legend:", "Unmodified", "Added", "Removed", "Modified", "cs222p-2017-fall-project4", "v1", "v1", "1", "{{{", "2", "#!div", "style=\"background-color:#f2f3f4\"", "3", "4", "[[PageOutline]]", "5", "6", "=", "Project", "4:", "Implementing", "a", "Query", "Engine", "with", "the", "Extension", "of", "the", "Relation", "Manager", "=", "7", "*", "'''", "Deadline:", "Friday,", "Dec", "8,", "2017", "at", "11:45", "pm,", "on", "EEE.'''", "8", "*", "'''", "Full", "Credit:", "100", "points", "'''", "9", "*", "'''", "Maximum", "Extra", "Credit:", "15", "points.", "'''[[br]]", "10", "*", "'''", "As", "in", "Projects", "2", "and", "3,", "you", "should", "work", "with", "your", "original", "team", "member", "for", "this", "Project.", "'''", "11", "12", "==", "Introduction", "==", "13", "In", "this", "project,", "you", "will", "first", "extend", "the", "!RelationManager", "(RM)", "component", "that", "you", "implemented", "for", "project", "2", "so", "that", "the", "RM", "layer", "can", "orchestrate", "both", "the", "!RecordBasedFileManager", "(RBF)", "and", "!IndexManager", "(IX)", "layers", "when", "tuple-level", "operations", "happen,", "and", "the", "RM", "layer", "will", "also", "be", "managing", "the", "catalog", "information", "related", "to", "indices", "at", "this", "level.", "After", "the", "RM", "layer", "extension,", "you", "will", "implement", "a", "!QueryEngine", "(QE)", "component.", "The", "QE", "component", "provides", "classes", "and", "methods", "for", "answering", "SQL", "queries.", "For", "simplicity,", "you", "only", "need", "to", "implement", "several", "basic", "relational", "operators.", "All", "operators", "are", "iterator-based.", "To", "give", "you", "a", "jumpstart,", "we've", "implemented", "two", "wrapper", "operators", "on", "top", "of", "the", "RM", "layer", "that", "provide", "file", "and", "index", "scanning.", "See", "the", "[wiki:cs222p-2017-fall-project4#Appendix", "Appendix]", "for", "more", "details.[[BR]]", "14", "15", "You", "can", "download", "the", "[attachment:codebase.zip", "codebase].", "16", "See", "also", "the", "test", "cases", "included", "in", "the", "codebase", "for", "in-depth", "examples", "of", "how", "the", "operators", "are", "used.", "17", "18", "19", "[[BR]]", "20", "=", "Part", "4.1:", "!RelationManager", "Extensions", "=", "21", "==", "!RelationManager", "==", "22", "All", "of", "the", "methods", "that", "you", "implemented", "for", "Project", "2", "should", "now", "be", "extended", "to", "coordinate", "data", "files", "plus", "any", "associated", "indices", "of", "the", "data", "files.", "For", "example,", "if", "you", "insert", "a", "tuple", "into", "a", "table", "using", "RelationManager::insertTuple(),", "the", "tuple", "should", "be", "inserted", "into", "the", "table", "(via", "the", "RBF", "layer)", "and", "each", "corresponding", "entry", "should", "be", "inserted", "into", "each", "associated", "index", "of", "the", "table", "(via", "the", "IX", "layer).", "Also,", "if", "you", "delete", "a", "table", "using", "RelationManager::deleteTable(),", "all", "associated", "indices", "should", "be", "deleted,", "too.", "This", "applies", "both", "to", "catalog", "entries", "that", "record", "what's", "what", "and", "to", "the", "file", "artifacts", "themselves.", "The", "!RelationManager", "class,", "in", "addition", "to", "enforcing", "the", "coordination", "semantics", "between", "data", "files", "and", "the", "indices", "in", "your", "existing", "methods,", "will", "also", "include", "the", "following", "newly-added", "index-related", "methods.", "These", "methods", "can", "all", "be", "implemented", "by", "simply", "delegating", "their", "work", "to", "the", "underlying", "IX", "layer", "that", "you", "built", "in", "Project", "3.", "(This", "part", "of", "the", "project", "is", "largely", "a", "big", "wrapper.", ":-))", "23", "24", "{{{", "25", "class", "RelationManager", "26", "{", "27", "public:", "28", "...", "29", "RC", "createIndex(const", "string", "&tableName,", "const", "string", "&attributeName);", "30", "31", "RC", "destroyIndex(const", "string", "&tableName,", "const", "string", "&attributeName);", "32", "33", "//", "indexScan", "returns", "an", "iterator", "to", "allow", "the", "caller", "to", "go", "through", "qualified", "entries", "in", "index", "34", "RC", "indexScan(const", "string", "&tableName,", "35", "const", "string", "&attributeName,", "36", "const", "void", "*lowKey,", "37", "const", "void", "*highKey,", "38", "bool", "lowKeyInclusive,", "39", "bool", "highKeyInclusive,", "40", "RM_IndexScanIterator", "&rm_IndexScanIterator", "41", ");", "42", "...", "43", "}", "44", "}}}", "45", "46", "===", "RC", "createIndex(const", "string", "&tableName,", "const", "string", "&attributeName)", "===", "47", "This", "method", "creates", "an", "index", "on", "a", "given", "attribute", "of", "a", "given", "table.", "(It", "should", "also", "reflect", "its", "existence", "in", "the", "catalogs.)", "48", "49", "===", "RC", "destroyIndex(const", "string", "&tableName,", "const", "string", "&attributeName)", "===", "50", "This", "method", "destroys", "an", "index", "on", "a", "given", "attribute", "of", "a", "given", "table.", "(It", "should", "also", "reflect", "its", "non-existence", "in", "the", "catalogs.)", "51", "52", "===", "RC", "indexScan(const", "string", "&tableName,", "const", "string", "&attributeName,", "const", "void", "*lowKey,", "const", "void", "*highKey,", "bool", "lowKeyInclusive,", "bool", "highKeyInclusive,", "RM_IndexScanIterator", "&rm_IndexScanIterator)", "===", "53", "This", "method", "should", "initialize", "a", "condition-based", "scan", "over", "the", "entries", "in", "the", "open", "index", "on", "the", "given", "attribute", "of", "the", "given", "table.", "If", "the", "scan", "initiation", "method", "is", "successful,", "a", "RM_IndexScanIterator", "object", "called", "rm_IndexScanIterator", "is", "returned.", "(Please", "see", "the", "RM_IndexScanIterator", "class", "below.)", "Once", "underway,", "by", "calling", "RM_IndexScanIterator::getNextEntry(),", "the", "iterator", "should", "produce", "the", "entries", "of", "all", "records", "whose", "indexed", "attribute", "key", "falls", "into", "the", "range", "specified", "by", "the", "lowKey,", "highKey,", "and", "inclusive", "flags.", "If", "lowKey", "is", "NULL,", "it", "can", "be", "interpreted", "as", "-infinity.", "If", "highKey", "is", "NULL,", "it", "can", "be", "interpreted", "as", "+infinity.", "The", "format", "of", "the", "parameter", "lowKey", "and", "highKey", "is", "the", "same", "as", "the", "format", "of", "the", "key", "in", "IndexManager::insertEntry().", "54", "55", "==", "RM_IndexScanIterator", "==", "56", "{{{", "57", "class", "RM_IndexScanIterator", "{", "58", "public:", "59", "RM_IndexScanIterator();", "//", "Constructor", "60", "~RM_IndexScanIterator();", "//", "Destructor", "61", "62", "//", "\"key\"", "follows", "the", "same", "format", "as", "in", "IndexManager::insertEntry()", "63", "RC", "getNextEntry(RID", "&rid,", "void", "*key);", "//", "Get", "next", "matching", "entry", "64", "RC", "close();", "//", "Terminate", "index", "scan", "65", "};", "66", "}}}", "67", "68", "===", "RC", "getNextEntry(RID", "&rid,", "void", "*key)", "===", "69", "This", "method", "should", "set", "its", "output", "parameters", "rid", "and", "key", "to", "be", "the", "RID", "and", "key,", "respectively,", "of", "the", "next", "record", "in", "the", "index", "scan.", "This", "method", "should", "return", "RM_EOF", "if", "there", "are", "no", "index", "entries", "left", "satisfying", "the", "scan", "condition.", "You", "may", "assume", "that", "RM", "component", "clients", "will", "not", "close", "the", "corresponding", "open", "index", "while", "a", "scan", "is", "underway.", "70", "71", "===", "RC", "close()", "===", "72", "This", "method", "should", "terminate", "the", "index", "scan.", "73", "74", "75", "[[BR]]", "76", "[[BR]]", "77", "=", "Part", "4.2:", "Query", "Engine", "=", "78", "==", "Iterator", "Interface", "==", "79", "All", "of", "the", "operators", "that", "you", "will", "implement", "in", "this", "part", "inherit", "from", "the", "following", "'''Iterator'''", "interface.", "80", "81", "{{{", "82", "class", "Iterator", "{", "83", "//", "All", "the", "relational", "operators", "and", "access", "methods", "are", "iterators", "84", "//", "This", "class", "is", "the", "super", "class", "of", "all", "the", "following", "operator", "classes", "85", "public:", "86", "virtual", "RC", "getNextTuple(void", "*data)", "=", "0;", "87", "//", "For", "each", "attribute", "in", "vector<Attribute>,", "name", "it", "rel.attr", "88", "virtual", "void", "getAttributes(vector<Attribute>", "&attrs)", "const", "=", "0;", "89", "virtual"], "content_hash": "a7a6f850ac3d3d02ad5606b6462bf699"}