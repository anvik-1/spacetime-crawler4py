{"url": "https://grape.ics.uci.edu/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project2/Form.java", "word_count": 276, "words": ["/*", "A", "servlet", "to", "display", "the", "contents", "of", "the", "MySQL", "movieDB", "database", "*/", "import", "javax.servlet.annotation.WebServlet;", "import", "javax.servlet.http.HttpServlet;", "import", "javax.servlet.http.HttpServletRequest;", "import", "javax.servlet.http.HttpServletResponse;", "import", "java.io.IOException;", "import", "java.io.PrintWriter;", "import", "java.sql.Connection;", "import", "java.sql.DriverManager;", "import", "java.sql.ResultSet;", "import", "java.sql.Statement;", "//", "Declaring", "a", "WebServlet", "called", "FormServlet,", "which", "maps", "to", "url", "\"/form\"", "@WebServlet(name", "=", "\"FormServlet\",", "urlPatterns", "=", "\"/form\")", "public", "class", "Form", "extends", "HttpServlet", "{", "public", "String", "getServletInfo()", "{", "return", "\"Servlet", "connects", "to", "MySQL", "database", "and", "displays", "result", "of", "a", "SELECT\";", "}", "//", "Use", "http", "GET", "public", "void", "doGet(HttpServletRequest", "request,", "HttpServletResponse", "response)", "throws", "IOException", "{", "String", "loginUser", "=", "\"mytestuser\";", "String", "loginPasswd", "=", "\"mypassword\";", "String", "loginUrl", "=", "\"jdbc:mysql://localhost:3306/moviedb\";", "response.setContentType(\"text/html\");", "//", "Response", "mime", "type", "//", "Output", "stream", "to", "STDOUT", "PrintWriter", "out", "=", "response.getWriter();", "//", "building", "page", "head", "with", "title", "out.println(\"", "MovieDB:", "Found", "Records", "\");", "//", "building", "page", "body", "out.println(\"", "MovieDB:", "Found", "Records", "\");", "try", "{", "Class.forName(\"com.mysql.jdbc.Driver\").newInstance();", "//", "Create", "a", "new", "connection", "to", "database", "Connection", "dbCon", "=", "DriverManager.getConnection(loginUrl,", "loginUser,", "loginPasswd);", "//", "Declare", "a", "new", "statement", "Statement", "statement", "=", "dbCon.createStatement();", "//", "Retrieve", "parameter", "\"name\"", "from", "request,", "which", "refers", "to", "the", "value", "of", "in", "index.html", "String", "name", "=", "request.getParameter(\"name\");", "//", "Generate", "a", "SQL", "query", "String", "query", "=", "String.format(\"SELECT", "*", "from", "stars", "where", "name", "like", "'%s'\",", "name);", "//", "Perform", "the", "query", "ResultSet", "rs", "=", "statement.executeQuery(query);", "//", "Create", "a", "html", "out.println(\"", "\");", "//", "Iterate", "through", "each", "row", "of", "rs", "and", "create", "a", "table", "row", "out.println(\"", "ID", "Name", "\");", "while", "(rs.next())", "{", "String", "m_ID", "=", "rs.getString(\"ID\");", "String", "m_Name", "=", "rs.getString(\"name\");", "out.println(String.format(\"", "%s", "%s", "\",", "m_ID,", "m_Name));", "}", "out.println(\"", "\");", "//", "Close", "all", "structures", "rs.close();", "statement.close();", "dbCon.close();", "}", "catch", "(Exception", "ex)", "{", "//", "Output", "Error", "Massage", "to", "html", "out.println(String.format(\"", "MovieDB:", "Error", "\\n", "SQL", "error", "in", "doGet:", "%s", "\",", "ex.getMessage()));", "return;", "}", "out.close();", "}", "}"], "content_hash": "4a5ee7103c6c9b8ef855d946d09269fd"}