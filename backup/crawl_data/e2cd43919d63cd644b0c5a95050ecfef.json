{"url": "http://www.ics.uci.edu/~eppstein/161/960118.html", "word_count": 1981, "words": ["Sorting", "by", "divide-and-conquer", "ICS", "161:", "Design", "and", "Analysis", "of", "Algorithms", "Lecture", "notes", "for", "January", "18,", "1996", "Three", "Divide", "and", "Conquer", "Sorting", "Algorithms", "Today", "we'll", "finish", "heapsort,", "and", "describe", "both", "mergesort", "and", "quicksort.", "Why", "do", "we", "need", "multiple", "sorting", "algorithms?", "Different", "methods", "work", "better", "in", "different", "applications.", "Heapsort", "uses", "close", "to", "the", "right", "number", "of", "comparisons", "but", "needs", "to", "move", "data", "around", "quite", "a", "bit.", "It", "can", "be", "done", "in", "a", "way", "that", "uses", "very", "little", "extra", "memory.", "It's", "probably", "good", "when", "memory", "is", "tight,", "and", "you", "are", "sorting", "many", "small", "items", "that", "come", "stored", "in", "an", "array.", "Merge", "sort", "is", "good", "for", "data", "that's", "too", "big", "to", "have", "in", "memory", "at", "once,", "because", "its", "pattern", "of", "storage", "access", "is", "very", "regular.", "It", "also", "uses", "even", "fewer", "comparisons", "than", "heapsort,", "and", "is", "especially", "suited", "for", "data", "stored", "as", "linked", "lists.", "Quicksort", "also", "uses", "few", "comparisons", "(somewhat", "more", "than", "the", "other", "two).", "Like", "heapsort", "it", "can", "sort", "\"in", "place\"", "by", "moving", "data", "in", "an", "array.", "Heapification", "Recall", "the", "idea", "of", "heapsort:", "heapsort(list", "L)", "{", "make", "heap", "H", "from", "L", "make", "empty", "list", "X", "while", "H", "nonempty", "remove", "smallest", "from", "H", "and", "add", "it", "to", "X", "return", "X", "}", "Remember", "that", "a", "heap", "is", "just", "a", "balanced", "binary", "tree", "in", "which", "the", "value", "at", "any", "node", "is", "smaller", "than", "the", "values", "at", "its", "children.", "We", "went", "over", "most", "of", "this", "last", "time.", "The", "total", "number", "of", "comparisons", "is", "n", "log", "n", "+", "however", "many", "are", "needed", "to", "make", "H.", "The", "only", "missing", "step:", "how", "to", "make", "a", "heap?", "To", "start", "with,", "we", "can", "set", "up", "a", "binary", "tree", "of", "the", "right", "size", "and", "shape,", "and", "put", "the", "objects", "into", "the", "tree", "in", "any", "old", "order.", "This", "is", "all", "easy", "and", "doesn't", "require", "any", "comparisons.", "Now", "we", "have", "to", "switch", "objects", "around", "to", "get", "them", "back", "in", "order.", "The", "divide", "and", "conquer", "idea:", "find", "natural", "subproblems,", "solve", "them", "recursively,", "and", "combine", "them", "to", "get", "an", "overall", "solution.", "Here", "the", "obvious", "subproblems", "are", "the", "subtrees.", "If", "we", "solve", "them", "recursively,", "we", "get", "something", "that", "is", "close", "to", "being", "a", "heap,", "except", "that", "perhaps", "the", "root", "doesn't", "satisfy", "the", "heap", "property.", "To", "make", "the", "whole", "thing", "a", "heap,", "we", "merely", "have", "to", "percolate", "that", "value", "down", "to", "a", "lower", "level", "in", "the", "tree.", "heapify(tree", "T)", "{", "if", "(T", "is", "nonempty)", "{", "heapify(left", "subtree)", "heapify(right", "subtree)", "let", "x", "=", "value", "at", "tree", "root", "while", "node", "containing", "x", "doesn't", "satisfy", "heap", "propert", "switch", "values", "of", "node", "and", "its", "smallest", "child", "}", "}", "The", "while", "loop", "performs", "two", "comparisons", "per", "iteration,", "and", "takes", "at", "most", "log", "n", "iterations,", "so", "the", "time", "for", "this", "satisfies", "a", "recurrence", "T(n)", "<=", "2", "T(n/2)", "+", "2", "log", "n", "How", "to", "solve", "it?", "Divide", "and", "conquer", "recurrences", "In", "general,", "divide", "and", "conquer", "is", "based", "on", "the", "following", "idea.", "The", "whole", "problem", "we", "want", "to", "solve", "may", "too", "big", "to", "understand", "or", "solve", "at", "once.", "We", "break", "it", "up", "into", "smaller", "pieces,", "solve", "the", "pieces", "separately,", "and", "combine", "the", "separate", "pieces", "together.", "We", "analyze", "this", "in", "some", "generality:", "suppose", "we", "have", "a", "pieces,", "each", "of", "size", "n/b", "and", "merging", "takes", "time", "f(n).", "(In", "the", "heapification", "example", "a=b=2", "and", "f(n)=O(log", "n)", "but", "it", "will", "not", "always", "be", "true", "that", "a=b", "--", "sometimes", "the", "pieces", "will", "overlap.)", "The", "easiest", "way", "to", "understand", "what's", "going", "on", "here", "is", "to", "draw", "a", "tree", "with", "nodes", "corresponding", "to", "subproblems", "(labeled", "with", "the", "size", "of", "the", "subproblem)", "n", "/", "|", "\\", "n/b", "n/b", "n/b", "/|\\", "/|\\", "/|\\", ".", ".", ".", ".", ".", ".", ".", ".", ".", "For", "simplicity,", "let's", "assume", "n", "is", "a", "power", "of", "b,", "and", "that", "the", "recursion", "stops", "when", "n", "is", "1.", "Notice", "that", "the", "size", "of", "a", "node", "depends", "only", "on", "its", "level:", "size(i)", "=", "n/(b^i).", "What", "is", "time", "taken", "by", "a", "node", "at", "level", "i?", "time(i)", "=", "f(n/b^i)", "How", "many", "levels", "can", "we", "have", "before", "we", "get", "down", "to", "n=1?", "For", "bottom", "level,", "n/b^i=1,", "so", "n=b^i", "and", "i=(log", "n)/(log", "b).", "How", "many", "items", "at", "level", "i?", "a^i.", "So", "putting", "these", "together", "we", "have", "(log", "n)/(log", "b)", "T(n)", "=", "sum", "a^i", "f(n/b^i)", "i=0", "This", "looks", "messy,", "but", "it's", "not", "too", "bad.", "There", "are", "only", "a", "few", "terms", "(logarithmically", "many)", "and", "often", "the", "sum", "is", "dominated", "by", "the", "terms", "at", "one", "end", "(f(n))", "or", "the", "other", "(n^(log", "a/log", "b)).", "In", "fact,", "you", "will", "generally", "only", "be", "a", "logarithmic", "factor", "away", "from", "the", "truth", "if", "you", "approximate", "the", "solution", "by", "the", "sum", "of", "these", "two,", "O(f(n)", "+", "n^(log", "a/log", "b)).", "Let's", "use", "this", "to", "analyze", "heapification.", "By", "plugging", "in", "parameters", "a=b=2,", "f(n)=log", "n,", "we", "get", "log", "n", "T(n)", "=", "2", "sum", "2^i", "log(n/2^i)", "i=0", "Rewriting", "the", "same", "terms", "in", "the", "opposite", "order,", "this", "turns", "out", "to", "equal", "log", "n", "T(n)", "=", "2", "sum", "n/2^i", "log(2^i)", "i=0", "log", "n", "=", "2n", "sum", "i/2^i", "i=0", "infty", "<=", "2n", "sum", "i/2^i", "i=0", "=", "4n", "So", "heapification", "takes", "at", "most", "4n", "comparisons", "and", "heapsort", "takes", "at", "most", "n", "log", "n", "+", "4n.", "(There's", "an", "n", "log", "n", "-", "1.44n", "lower", "bound", "so", "we're", "only", "within", "O(n)", "of", "the", "absolute", "best", "possible.)", "This", "was", "an", "example", "of", "a", "sorting", "algorithm", "where", "one", "part", "used", "divide", "and", "conquer.", "What", "about", "doing", "the", "whole", "algorithm", "that", "way?", "Merge", "sort", "According", "to", "Knuth,", "merge", "sort", "was", "one", "of", "the", "earliest", "sorting", "algorithms,", "invented", "by", "John", "von", "Neumann", "in", "1945.", "Let's", "look", "at", "the", "combine", "step", "first.", "Suppose", "you", "have", "some", "data", "that's", "close", "to", "sorted", "--", "it", "forms", "two", "sorted", "lists.", "You", "want", "to", "merge", "the", "two", "sorted", "lists", "quickly", "rather", "than", "having", "to", "resort", "to", "a", "general", "purpose", "sorting", "algorithm.", "This", "is", "easy", "enough:", "merge(L1,L2)", "{", "list", "X", "=", "empty", "while", "(neither", "L1", "nor", "L2", "empty)", "{", "compare", "first", "items", "of", "L1", "&", "L2", "remove", "smaller", "of", "the", "two", "from", "its", "list", "add", "to", "end", "of", "X", "}", "catenate", "remaining", "list", "to", "end", "of", "X", "return", "X", "}", "Time", "analysis:", "in", "the", "worst", "case", "both", "lists", "empty", "at", "about", "same", "time,", "so", "everything", "has", "to", "be", "compared.", "Each", "comparison", "adds", "one", "item", "to", "X", "so", "the"], "content_hash": "76a26b37c793c35f6b7dde5e46743421"}