{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project2?format=txt&version=1", "word_count": 887, "words": ["=", "CS221:", "Project", "2", "-", "II:", "Inverted", "index,", "boolean", "search", "=", "'''Test", "Cases", "Due:", "Week", "4", "Tu.", "(Apr", "23),", "Due", "on", "Github", "as", "Pull", "Requests'''[[BR]]", "'''Review", "Due:", "Week", "4,", "Fri.", "(Apr", "26),", "Due", "on", "Github", "as", "Pull", "Requests", "Comments'''[[BR]]", "'''Final", "Code", "Due:", "Week", "5,", "Sun.", "(May.", "5),", "Due", "on", "Github.'''[[BR]]", "=", "Overview", "=", "==", "Coding", "Tasks", "==", "1.", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "(7", "points)", "1.", "Implement", "merge", "of", "inverted", "index", "segments.", "(4", "points)", "1.", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "(6", "points)", "1.", "(Optional)", "Extra", "Credit:", "Implement", "a", "dynamic-programming-based", "Chinese", "or", "Japanese", "tokenizer.", "(3", "points)", "==", "Testing", "Tasks", "==", "1.", "Write", "at", "least", "2", "test", "cases", "for", "a", "task", "(3", "points)", "1.", "Review", "the", "test", "cases", "of", "two", "teams", "(2", "points)", "Total:", "17", "points", "(+", "3", "extra", "credits)", "Project", "2:", "Implement", "an", "disk-based", "inverted", "index.", "In", "this", "project,", "you'll", "be", "implementing", "a", "disk-based", "inverted", "index", "and", "the", "search", "operations.", "On", "a", "high", "level,", "inverted", "index", "stores", "the", "mapping", "from", "keywords", "to", "the", "documents", "they", "appear", "in.", "A", "simple", "in-memory", "structure", "could", "be", "`Map", ">`,", "where", "each", "key", "is", "a", "keyword", "token", "(also", "called", "term),", "and", "each", "value", "is", "a", "list", "of", "(often", "sorted)", "document", "IDs", "(also", "called", "postings).", "In", "this", "project,", "the", "disk-based", "index", "structure", "is", "similar", "to", "the", "idea", "of", "LSM", "(Log-Structured", "Merge", "tree).", "A", "general", "idea", "will", "be", "described.", "The", "details", "should", "follow", "what", "Professor", "says", "in", "the", "lecture.", "The", "inverted", "index", "consists", "of", "multiple", "index", "segments,", "where", "each", "segment", "is", "only", "created", "and", "then", "appended.", "Once", "each", "segment", "is", "written", "to", "disk,", "it", "becomes", "immutable", "and", "is", "never", "changed", "again.", "Each", "index", "segment", "is", "a", "fully", "searchable", "inverted", "index,", "it", "contains", "the", "inverted", "index", "structure", "as", "well", "the", "document", "store", "(map", "from", "documentID", "to", "actual", "document),", "the", "document", "ID", "of", "each", "segment", "is", "local", "to", "the", "segment", "itself", "and", "it", "is", "invisible", "to", "the", "user.", "When", "searching", "a", "keyword,", "all", "segments", "are", "searched,", "and", "the", "result", "documents", "from", "each", "segment", "are", "combined.", "Example:", "Add", "documents", "\"cat", "dog\"", "and", "\"cat", "elephant\",", "then", "flush", "to", "write", "Segment0.", "Segment0:", "----------", "InvertIndex:", "{\"cat\":", "[0,", "1],", "\"dog\":", "[0],", "\"elephant\":", "[1]}", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"cat", "elephant\"}", "----------", "Then", "add", "documents", "\"cat", "dog\"", "and", "\"wolf", "dog\",", "and", "flush", "to", "write", "a", "new", "Segment,", "Segment1.", "Segment1:", "----------", "InvertIndex:", "{\"cat\":", "[0],", "\"dog\":", "[0,", "1],", "\"wolf\":", "[1]}", "DocStore:", "{0:", "\"cat", "dog\",", "1:", "\"wolf", "dog\"}", "----------", "When", "searching", "the", "word", "\"cat\",", "first", "search", "Segment0", "and", "get", "[\"cat", "dog\",", "\"cat", "elephant\"],", "then", "search", "Segment1", "and", "get", "[\"cat", "dog\"],", "then", "combine", "results", "to", "get", "[\"cat", "dog\",", "\"cat", "elephant\",", "\"cat", "dog\"]", "Task", "1:", "Implement", "LSM-like", "disk-based", "inverted", "index", "that", "supports", "insertions.", "In", "this", "task,", "you'll", "implement", "the", "disk", "file", "structure", "of", "an", "inverted", "index", "segment.", "When", "a", "document", "is", "added", "via", "`addDocument()`,", "it", "should", "be", "first", "stored", "in", "the", "in-memory", "buffer.", "Whenever", "the", "number", "of", "documents", "reached", "default_flush_threshold,", "or", "function", "`flush()`", "is", "called,", "you", "should", "create", "a", "new", "inverted", "index", "segment", "with", "the", "documents", "in", "the", "buffer.", "The", "specific", "format", "of", "the", "inverted", "lists", "should", "in", "general", "follow", "what", "Professor", "says", "in", "lecture.", "You", "also", "have", "freedom", "to", "design", "the", "format", "to", "make", "it", "more", "efficient", "to", "store", "or", "search.", "In", "principle,", "the", "terms", "can", "be", "loaded", "into", "memory,", "but", "all", "the", "posting", "lists", "cannot", "be", "entirely", "loaded", "into", "memory.", "Functions", "to", "implement,", "see", "each", "function", "signature", "to", "check", "the", "details:", "{@link", "this#addDocument};", "{@link", "this#flush};", "{@link", "this#documentIterator};", "{@link", "this#getNumSegments};", "{@link", "this#getIndexSegment};", "Task", "2:", "Implement", "merge", "of", "inverted", "index", "segments.", "In", "this", "task,", "you'll", "implement", "merging", "index", "segments.", "We", "cannot", "let", "number", "of", "segments", "grow", "infinitely", "because", "it", "would", "mean", "searching", "a", "keyword", "needs", "to", "go", "through", "a", "lot", "of", "documents.", "Whenever", "the", "number", "of", "segments", "has", "reached", "the", "default_merge_threshold,", "or", "`mergeAllSegments()`", "is", "called,", "you", "need", "to", "merge", "*all*", "segments", "in", "the", "inverted", "index", "pair-wise.", "You", "could", "assume", "merging", "only", "happens", "when", "you", "have", "an", "even", "number", "of", "segments.", "When", "merging", "two", "segments", "into", "one,", "since", "each", "segment", "has", "its", "own", "local", "document", "ID,", "you", "need", "to", "bump", "up", "all", "document", "IDs", "in", "one", "of", "the", "segments.", "As", "an", "example,", "Segment0", "contains", "local", "docID", "1-100,", "Segment1", "contains", "local", "docID", "1-100,", "first", "find", "the", "max", "docID", "in", "Segment0,", "which", "is", "100,", "then", "bump", "up", "Segment1's", "docIDs", "to", "become", "101-200,", "then", "do", "the", "merge.", "Functions", "to", "implement:", "{@link", "this#mergeAllSegments}", "Task", "3:", "Implement", "keyword", "search,", "boolean", "AND", "search,", "and", "boolean", "OR", "search.", "In", "this", "task,", "you'll", "implement", "searching", "on", "top", "of", "the", "inverted", "index.", "You", "could", "assume", "all", "documents", "are", "flushed", "to", "disk", "index", "segments", "when", "doing", "search.", "For", "a", "query", "keyword,", "you", "need", "to", "first", "analyze", "it", "using", "the", "analyzer.", "You", "could", "assume", "after", "tokenization", "and", "stemming,", "the", "result", "only", "has", "1", "token,", "or", "is", "empty", "(such", "as", "the", "query", "is", "a", "stop", "ord).", "If", "the", "query", "is", "empty,", "searching", "should", "not", "return", "any", "results.", "Functions", "to", "implement:", "{@link", "this#searchQuery}", "{@link", "this#searchAndQuery}", "{@link", "this#searchOrQuery}", "Task", "4", "(Optional", "Extra", "Credit):", "Implement", "deletions.", "In", "our", "LSM-like", "index", "structure,", "deletion", "is", "implemented", "by", "maintaining", "a", "separate", "deletion", "marks", "per", "segment.", "The", "document", "is", "not", "actually", "deleted", "in", "the", "inverted", "index", "nor", "document", "store.", "When", "reading", "or", "searching,", "the", "docID", "is", "checked", "with", "the", "deletion", "mark", "to", "see", "if", "the", "document", "is", "deleted.", "The", "document", "should", "be", "deleted", "when", "merging", "two", "index", "segments.", "Functions", "to", "implement:", "{@link", "this#deleteDocuments}", "Task", "5", "(Optional", "Extra", "Credit):", "Implement", "compression"], "content_hash": "e40e02a0700f5df675ed9dd6302dc41c"}